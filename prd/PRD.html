<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>PRD - Tummy Tales Dev Guide</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 10px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.collection-content td {
	white-space: pre-wrap;
	word-break: break-word;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
	margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.callout img.notion-static-icon {
	width: 1em;
	height: 1em;
}

.callout p {
	margin: 0;
}

.callout h1,
.callout h2,
.callout h3 {
	margin: 0 0 0.6rem;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

blockquote.quote-large {
	font-size: 1.25em;
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(44, 44, 43, 1);
}
.highlight-gray {
	color: rgba(134, 131, 126, 1);
	fill: rgba(134, 131, 126, 1);
}
.highlight-brown {
	color: rgba(159, 118, 90, 1);
	fill: rgba(159, 118, 90, 1);
}
.highlight-orange {
	color: rgba(210, 123, 45, 1);
	fill: rgba(210, 123, 45, 1);
}
.highlight-yellow {
	color: rgba(203, 148, 52, 1);
	fill: rgba(203, 148, 52, 1);
}
.highlight-teal {
	color: rgba(80, 148, 110, 1);
	fill: rgba(80, 148, 110, 1);
}
.highlight-blue {
	color: rgba(56, 125, 201, 1);
	fill: rgba(56, 125, 201, 1);
}
.highlight-purple {
	color: rgba(154, 107, 180, 1);
	fill: rgba(154, 107, 180, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(207, 81, 72, 1);
	fill: rgba(207, 81, 72, 1);
}
.highlight-default_background {
	color: rgba(44, 44, 43, 1);
}
.highlight-gray_background {
	background: rgba(42, 28, 0, 0.07);
}
.highlight-brown_background {
	background: rgba(139, 46, 0, 0.086);
}
.highlight-orange_background {
	background: rgba(224, 101, 1, 0.129);
}
.highlight-yellow_background {
	background: rgba(211, 168, 0, 0.137);
}
.highlight-teal_background {
	background: rgba(0, 100, 45, 0.09);
}
.highlight-blue_background {
	background: rgba(0, 124, 215, 0.094);
}
.highlight-purple_background {
	background: rgba(102, 0, 178, 0.078);
}
.highlight-pink_background {
	background: rgba(197, 0, 93, 0.086);
}
.highlight-red_background {
	background: rgba(223, 22, 0, 0.094);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(134, 131, 126, 1);
	fill: rgba(134, 131, 126, 1);
}
.block-color-brown {
	color: rgba(159, 118, 90, 1);
	fill: rgba(159, 118, 90, 1);
}
.block-color-orange {
	color: rgba(210, 123, 45, 1);
	fill: rgba(210, 123, 45, 1);
}
.block-color-yellow {
	color: rgba(203, 148, 52, 1);
	fill: rgba(203, 148, 52, 1);
}
.block-color-teal {
	color: rgba(80, 148, 110, 1);
	fill: rgba(80, 148, 110, 1);
}
.block-color-blue {
	color: rgba(56, 125, 201, 1);
	fill: rgba(56, 125, 201, 1);
}
.block-color-purple {
	color: rgba(154, 107, 180, 1);
	fill: rgba(154, 107, 180, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(207, 81, 72, 1);
	fill: rgba(207, 81, 72, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(240, 239, 237, 1);
}
.block-color-brown_background {
	background: rgba(245, 237, 233, 1);
}
.block-color-orange_background {
	background: rgba(251, 235, 222, 1);
}
.block-color-yellow_background {
	background: rgba(249, 243, 220, 1);
}
.block-color-teal_background {
	background: rgba(232, 241, 236, 1);
}
.block-color-blue_background {
	background: rgba(229, 242, 252, 1);
}
.block-color-purple_background {
	background: rgba(243, 235, 249, 1);
}
.block-color-pink_background {
	background: rgba(250, 233, 241, 1);
}
.block-color-red_background {
	background: rgba(252, 233, 231, 1);
}
.select-value-color-default { background-color: rgba(42, 28, 0, 0.07); }
.select-value-color-gray { background-color: rgba(28, 19, 1, 0.11); }
.select-value-color-brown { background-color: rgba(127, 51, 0, 0.156); }
.select-value-color-orange { background-color: rgba(196, 88, 0, 0.203); }
.select-value-color-yellow { background-color: rgba(209, 156, 0, 0.282); }
.select-value-color-green { background-color: rgba(0, 96, 38, 0.156); }
.select-value-color-blue { background-color: rgba(0, 118, 217, 0.203); }
.select-value-color-purple { background-color: rgba(92, 0, 163, 0.141); }
.select-value-color-pink { background-color: rgba(183, 0, 78, 0.152); }
.select-value-color-red { background-color: rgba(206, 24, 0, 0.164); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="2933ddca-8541-801d-a3ab-df91b6083279" class="page sans"><header><h1 class="page-title">PRD - Tummy Tales Dev Guide</h1><p class="page-description"></p></header><div class="page-body"><p id="2933ddca-8541-8008-b665-f5c2aba5a0ac" class="">
</p><h1 id="2933ddca-8541-803e-9a80-ef0d0ff71ace" class=""><strong>Product Overview, Vision &amp; Functional Scope</strong></h1><hr id="2933ddca-8541-8006-97b0-f2df2dc1d8cc"/><h2 id="2933ddca-8541-80e9-8522-fb4661d91af9" class="">1️⃣ Product Concept &amp; Vision</h2><h3 id="2933ddca-8541-8037-a0f0-ef4d4c717336" class=""><strong>What is Tummy Tales?</strong></h3><p id="2933ddca-8541-80ab-8be2-f5b055370da9" class="">Tummy Tales is a <strong>multi-role, subscription-based home-meal aggregator</strong> that connects</p><ul id="2933ddca-8541-805b-b860-ced7ca52b70a" class="bulleted-list"><li style="list-style-type:disc"><strong>Home chefs / tiffin vendors</strong> who want to sell their meals online, with</li></ul><ul id="2933ddca-8541-806c-8235-f5819b3a19f6" class="bulleted-list"><li style="list-style-type:disc"><strong>Consumers (students, professionals, PG residents)</strong> who want affordable, hygienic, home-cooked food delivered daily, and</li></ul><ul id="2933ddca-8541-80a1-b5d3-e23f138cd87b" class="bulleted-list"><li style="list-style-type:disc"><strong>Riders</strong> who handle last-mile delivery.</li></ul><p id="2933ddca-8541-8011-9a42-d70da5bf0ba2" class="">The platform functions as a <strong>digital marketplace and operations system</strong>—not a cloud kitchen or restaurant.</p><p id="2933ddca-8541-80a0-a198-d69e0fc1f440" class="">Tummy Tales is the <strong>Swiggy-meets-Airbnb for home-cooked food</strong>: chefs run independent kitchens; users subscribe; the system coordinates logistics.</p><hr id="2933ddca-8541-8038-ae1d-e1b0168cb48d"/><h3 id="2933ddca-8541-80fc-9434-e459291b7864" class=""><strong>Vision</strong></h3><blockquote id="2933ddca-8541-8062-ad9d-c8fef49029a3" class="">“Make home-cooked food accessible, reliable and scalable — while empowering thousands of homemakers to build micro-businesses.”</blockquote><p id="2933ddca-8541-80ab-a6a3-e2dbfa5c2f10" class="">Long-term, Tummy Tales will become the <strong>nationwide infrastructure layer for homemade meals</strong>, starting with Delhi NCR and expanding city-by-city.</p><hr id="2933ddca-8541-808a-884c-ccbc2fb3e60a"/><h3 id="2933ddca-8541-806d-ae65-d2d89c39c5d6" class=""><strong>Core Problem Statements</strong></h3><table id="2933ddca-8541-8065-88e7-fbdbf6a1b991" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-80d2-8c5b-eb27e33c3679"><th id=";|&gt;&lt;" class="simple-table-header-color simple-table-header">Stakeholder</th><th id=";|Bz" class="simple-table-header-color simple-table-header">Problem Today</th><th id="mncz" class="simple-table-header-color simple-table-header">What Tummy Tales Solves</th></tr></thead><tbody><tr id="2933ddca-8541-807c-8bd9-d38ccccd1eb9"><td id=";|&gt;&lt;" class=""><strong>Consumers</strong> (Students/Professionals)</td><td id=";|Bz" class="">Inconsistent PG food, expensive Swiggy/Zomato orders, lack of nutrition or trust</td><td id="mncz" class="">Affordable, hygienic, subscription-based home-cooked meals</td></tr><tr id="2933ddca-8541-8097-9afa-f07d01392177"><td id=";|&gt;&lt;" class=""><strong>Vendors (Home Chefs)</strong></td><td id=";|Bz" class="">No digital presence, irregular orders, delivery burden</td><td id="mncz" class="">Plug-and-play platform for cooking-only — Tummy Tales handles tech + ops</td></tr><tr id="2933ddca-8541-8075-ab23-cfd2783533b5"><td id=";|&gt;&lt;" class=""><strong>Riders</strong></td><td id=";|Bz" class="">Gig work without steady routes or fixed income</td><td id="mncz" class="">Predictable cluster-based deliveries via subscriptions</td></tr><tr id="2933ddca-8541-80b3-baef-d17ae7bf7ea3"><td id=";|&gt;&lt;" class=""><strong>Admin (Platform)</strong></td><td id=";|Bz" class="">Fragmented supply and ops visibility</td><td id="mncz" class="">Unified dashboard for vendors, consumers, orders and delivery</td></tr></tbody></table><hr id="2933ddca-8541-8095-9ad4-ea78faa62ea4"/><h2 id="2933ddca-8541-80b7-bae1-c3f13b13fa19" class="">2️⃣ Objectives &amp; Success Metrics</h2><table id="2933ddca-8541-8001-892d-e52717765f07" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-8000-9be4-f987a711c258"><th id="k\t&lt;" class="simple-table-header-color simple-table-header">Objective</th><th id="&gt;;rX" class="simple-table-header-color simple-table-header">Description</th><th id="?npp" class="simple-table-header-color simple-table-header">KPI / Success Metric</th></tr></thead><tbody><tr id="2933ddca-8541-80f4-8572-f3dea2194fb3"><td id="k\t&lt;" class=""><strong>Consumer Delight</strong></td><td id="&gt;;rX" class="">Smooth subscription and delivery experience</td><td id="?npp" class="">&gt; 4.3 avg meal rating; &lt; 5 % daily complaints</td></tr><tr id="2933ddca-8541-809b-b753-c67364ece5c7"><td id="k\t&lt;" class=""><strong>Vendor Empowerment</strong></td><td id="&gt;;rX" class="">Simplify onboarding and operations for home chefs</td><td id="?npp" class="">&gt; 100 active vendors in Delhi NCR</td></tr><tr id="2933ddca-8541-80dd-864f-c6101101c06b"><td id="k\t&lt;" class=""><strong>Scalable Ops System</strong></td><td id="&gt;;rX" class="">Role-based architecture for multi-city expansion</td><td id="?npp" class="">Multi-role auth + RLS fully stable</td></tr><tr id="2933ddca-8541-802f-ac25-f04d89de3850"><td id="k\t&lt;" class=""><strong>Revenue Model Validation</strong></td><td id="&gt;;rX" class="">Commission + subscription fees</td><td id="?npp" class="">Positive unit economics within first pilot</td></tr><tr id="2933ddca-8541-80e7-a7b3-d413f5a3485f"><td id="k\t&lt;" class=""><strong>Technology Foundation</strong></td><td id="&gt;;rX" class="">Secure, multi-tenant Supabase backend with Next.js frontend</td><td id="?npp" class="">&gt; 99 % uptime; no RLS leaks</td></tr><tr id="2933ddca-8541-802f-a842-f1ac5ba57039"><td id="k\t&lt;" class=""><strong>User Growth Readiness</strong></td><td id="&gt;;rX" class="">Seamless mobile transition (React Native)</td><td id="?npp" class="">Backend API agnostic; shared auth tokens</td></tr></tbody></table><hr id="2933ddca-8541-800a-81d6-c774169a950a"/><h2 id="2933ddca-8541-803c-a281-f54e92b0227d" class="">3️⃣ Core Value Proposition</h2><table id="2933ddca-8541-8050-862d-e60cdd959e3a" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-807d-8947-f295777e230e"><th id="jz}[" class="simple-table-header-color simple-table-header">Stakeholder</th><th id="{lVK" class="simple-table-header-color simple-table-header">Key Benefit</th></tr></thead><tbody><tr id="2933ddca-8541-80f0-91fa-fff39056d465"><td id="jz}[" class=""><strong>Consumers</strong></td><td id="{lVK" class="">Home-style food, consistent taste and pricing; easy weekly/monthly subscription</td></tr><tr id="2933ddca-8541-80b4-bc14-ee2dbe4ffdfe"><td id="jz}[" class=""><strong>Home Chefs</strong></td><td id="{lVK" class="">Earn ₹20 k–₹40 k/month from home without handling tech or logistics</td></tr><tr id="2933ddca-8541-80b0-a8c1-d90edf862eee"><td id="jz}[" class=""><strong>Riders</strong></td><td id="{lVK" class="">Reliable cluster routes and weekly payouts</td></tr><tr id="2933ddca-8541-80f3-bba1-fa692729c22d"><td id="jz}[" class=""><strong>Admin / Platform</strong></td><td id="{lVK" class="">Unified control of vendors, riders, orders and payments with real-time visibility</td></tr></tbody></table><p id="2933ddca-8541-809f-aaef-cf324d04e612" class="">Differentiators vs Swiggy/Zomato:</p><ul id="2933ddca-8541-8015-838e-ffc713655965" class="bulleted-list"><li style="list-style-type:disc"><strong>Subscription vs On-Demand:</strong> Tummy Tales runs on planned weekly/monthly meals.</li></ul><ul id="2933ddca-8541-8094-a199-c391a42b2ef6" class="bulleted-list"><li style="list-style-type:disc"><strong>Homemade vs Restaurant:</strong> Supply is local home chefs and tiffin vendors.</li></ul><ul id="2933ddca-8541-8072-8e32-f1ca17a33873" class="bulleted-list"><li style="list-style-type:disc"><strong>Empowerment Model:</strong> Creates earning opportunities for homemakers.</li></ul><ul id="2933ddca-8541-804b-8ee7-d8ef753c34ba" class="bulleted-list"><li style="list-style-type:disc"><strong>Multi-role System:</strong> Single account can act as consumer, vendor or rider.</li></ul><hr id="2933ddca-8541-806c-bcfb-c9fe8fd4bd78"/><h2 id="2933ddca-8541-8087-b037-fe977c165570" class="">4️⃣ Ecosystem Roles &amp; Interactions</h2><table id="2933ddca-8541-808d-8fa3-d824d4df7f77" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-8001-ba42-ecea3b957185"><th id="DJQx" class="simple-table-header-color simple-table-header">Role</th><th id="KQW:" class="simple-table-header-color simple-table-header">Primary Goals</th><th id="Ftll" class="simple-table-header-color simple-table-header">Key Actions on Platform</th></tr></thead><tbody><tr id="2933ddca-8541-8041-bbf2-c2f69434d2fb"><td id="DJQx" class=""><strong>Consumer</strong></td><td id="KQW:" class="">Find vendors → Subscribe → Track deliveries → Rate</td><td id="Ftll" class="">Browse vendors, customize meals, skip/swap days, auto-renew plan</td></tr><tr id="2933ddca-8541-80e4-96be-eeb92e0a8982"><td id="DJQx" class=""><strong>Vendor (Home Chef)</strong></td><td id="KQW:" class="">Run a tiffin business → Cook → Mark orders ready</td><td id="Ftll" class="">Onboard with KYC/FSSAI, add menu, track daily orders, see payouts</td></tr><tr id="2933ddca-8541-80c7-8ab5-caae2c16738e"><td id="DJQx" class=""><strong>Rider</strong></td><td id="KQW:" class="">Deliver efficiently and earn steady income</td><td id="Ftll" class="">Accept route, pickup, deliver via OTP, report issues</td></tr><tr id="2933ddca-8541-8034-bbec-efbd8ae107b7"><td id="DJQx" class=""><strong>Admin</strong></td><td id="KQW:" class="">Ensure smooth ops and compliance</td><td id="Ftll" class="">Approve vendors, manage users, monitor orders, payouts and complaints</td></tr></tbody></table><hr id="2933ddca-8541-8077-871d-fa624f3d1ed6"/><h3 id="2933ddca-8541-8025-902b-fae938d0d458" class=""><strong>High-Level Interaction Flow</strong></h3><ol type="1" id="2933ddca-8541-809c-a8a6-d7a838f9d9f8" class="numbered-list" start="1"><li><strong>Vendor creates menu + capacity</strong> → approved by Admin</li></ol><ol type="1" id="2933ddca-8541-803c-b7b0-c3f361502f65" class="numbered-list" start="2"><li><strong>Consumers subscribe</strong> to vendor plans via Tummy Tales</li></ol><ol type="1" id="2933ddca-8541-80e6-adf1-c37ca37696ff" class="numbered-list" start="3"><li><strong>Orders auto-generate daily</strong> from active subscriptions</li></ol><ol type="1" id="2933ddca-8541-80f5-9e2a-deb4d82c995f" class="numbered-list" start="4"><li><strong>Riders pick up meals</strong> → deliver → OTP confirmation</li></ol><ol type="1" id="2933ddca-8541-801f-aa8a-d64e5ce837d8" class="numbered-list" start="5"><li><strong>System updates status</strong> + payouts + analytics in Admin panel</li></ol><hr id="2933ddca-8541-80a1-a039-d4c49077662f"/><h2 id="2933ddca-8541-8015-a470-d893bf82ba92" class="">5️⃣ Functional Scope (Full Lifecycle)</h2><table id="2933ddca-8541-80bf-b6b1-f94479d343ce" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-80b9-bdbe-cb3f9c5879c2"><th id="bMSY" class="simple-table-header-color simple-table-header">Functionality</th><th id="=G^m" class="simple-table-header-color simple-table-header">Description</th><th id="f|Oy" class="simple-table-header-color simple-table-header">Responsible Role</th><th id="vVRn" class="simple-table-header-color simple-table-header">Status by Phase</th></tr></thead><tbody><tr id="2933ddca-8541-8014-80d1-c23e3e4640ae"><td id="bMSY" class=""><strong>Phone OTP Authentication</strong></td><td id="=G^m" class="">Supabase + Twilio OTP flow for login/signup</td><td id="f|Oy" class="">All Users</td><td id="vVRn" class="">Phase 0</td></tr><tr id="2933ddca-8541-80e4-81e9-fc72e0f5ef9e"><td id="bMSY" class=""><strong>Role-Based Sign-up &amp; Dashboard</strong></td><td id="=G^m" class="">Separate forms + dashboards for Consumer, Vendor, Rider (Admin manual)</td><td id="f|Oy" class="">All</td><td id="vVRn" class="">Phase 0</td></tr><tr id="2933ddca-8541-808c-9bdb-c476a7e05ef1"><td id="bMSY" class=""><strong>Multi-Role Accounts</strong></td><td id="=G^m" class="">One user can hold multiple roles</td><td id="f|Oy" class="">All</td><td id="vVRn" class="">Phase 0</td></tr><tr id="2933ddca-8541-80e1-8cdb-fd55bbc8eb2f"><td id="bMSY" class=""><strong>Vendor Onboarding</strong></td><td id="=G^m" class="">KYC/FSSAI, capacity, menu setup</td><td id="f|Oy" class="">Vendor</td><td id="vVRn" class="">Phase 1</td></tr><tr id="2933ddca-8541-8073-9450-c01b500bb383"><td id="bMSY" class=""><strong>Public Vendor Discovery</strong></td><td id="=G^m" class="">Browse active vendors by zone</td><td id="f|Oy" class="">Consumer</td><td id="vVRn" class="">Phase 1</td></tr><tr id="2933ddca-8541-80c2-929a-d92181f6ec22"><td id="bMSY" class=""><strong>Subscription &amp; Customization</strong></td><td id="=G^m" class="">3-day trial → weekly/monthly plans → meal customization</td><td id="f|Oy" class="">Consumer</td><td id="vVRn" class="">Phase 2</td></tr><tr id="2933ddca-8541-801a-90af-caf7873fe255"><td id="bMSY" class=""><strong>Order Generation &amp; Tracking</strong></td><td id="=G^m" class="">Auto-create daily orders from subscriptions + live tracking</td><td id="f|Oy" class="">Consumer, Vendor, Rider</td><td id="vVRn" class="">Phase 2</td></tr><tr id="2933ddca-8541-80ec-9ba9-f810d0cec03c"><td id="bMSY" class=""><strong>Delivery Management</strong></td><td id="=G^m" class="">Rider assignments, OTP delivery proof, status updates</td><td id="f|Oy" class="">Rider / Admin</td><td id="vVRn" class="">Phase 3</td></tr><tr id="2933ddca-8541-8032-aa23-d9e294ae4c3d"><td id="bMSY" class=""><strong>Payments &amp; Payouts</strong></td><td id="=G^m" class="">Razorpay integration + vendor/rider payouts</td><td id="f|Oy" class="">Admin</td><td id="vVRn" class="">Phase 3</td></tr><tr id="2933ddca-8541-8094-bc5e-d2204d62aab0"><td id="bMSY" class=""><strong>Support &amp; Feedback</strong></td><td id="=G^m" class="">Complaints, auto-credits, ratings</td><td id="f|Oy" class="">Consumer / Admin</td><td id="vVRn" class="">Phase 3</td></tr><tr id="2933ddca-8541-8013-aa64-d4d5e921e5bd"><td id="bMSY" class=""><strong>Analytics &amp; Reporting</strong></td><td id="=G^m" class="">Performance metrics and revenue dashboard</td><td id="f|Oy" class="">Admin</td><td id="vVRn" class="">Phase 4</td></tr><tr id="2933ddca-8541-8090-8cf4-cfac044feb61"><td id="bMSY" class=""><strong>Scalability Enhancements</strong></td><td id="=G^m" class="">Multi-city zones + mobile apps</td><td id="f|Oy" class="">Platform</td><td id="vVRn" class="">Phase 4</td></tr></tbody></table><hr id="2933ddca-8541-80b3-a607-f2db2d1e2acb"/><h2 id="2933ddca-8541-8050-94d2-efe078a55f83" class="">6️⃣ Development Phases (Strategic Roadmap)</h2><table id="2933ddca-8541-80a5-94a3-f04a8fad2de2" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-80fe-a496-d3be61b6fa31"><th id="oVyI" class="simple-table-header-color simple-table-header">Phase</th><th id="fcD&lt;" class="simple-table-header-color simple-table-header">Focus</th><th id="gZpQ" class="simple-table-header-color simple-table-header">Outcome</th></tr></thead><tbody><tr id="2933ddca-8541-80fc-8919-eccd789082ca"><td id="oVyI" class=""><strong>Phase 0</strong></td><td id="fcD&lt;" class=""><strong>Foundation &amp; Multi-Role Auth</strong></td><td id="gZpQ" class="">Phone-OTP auth, role management, dashboards for all roles</td></tr><tr id="2933ddca-8541-8021-86a8-d331e75d77fe"><td id="oVyI" class=""><strong>Phase 1</strong></td><td id="fcD&lt;" class=""><strong>Vendor Onboarding &amp; Public Discovery</strong></td><td id="gZpQ" class="">Vendor setup flows, admin approvals, public vendor pages</td></tr><tr id="2933ddca-8541-8058-8c83-cec4989bcba7"><td id="oVyI" class=""><strong>Phase 2</strong></td><td id="fcD&lt;" class=""><strong>Consumer Subscriptions &amp; Orders</strong></td><td id="gZpQ" class="">Full meal-plan system, customization, Razorpay payments</td></tr><tr id="2933ddca-8541-8001-b863-ebec3d0c3af6"><td id="oVyI" class=""><strong>Phase 3</strong></td><td id="fcD&lt;" class=""><strong>Delivery &amp; Operations</strong></td><td id="gZpQ" class="">Rider routes, delivery tracking, payout workflows</td></tr><tr id="2933ddca-8541-8049-a396-f21109e33668"><td id="oVyI" class=""><strong>Phase 4</strong></td><td id="fcD&lt;" class=""><strong>Scale &amp; Analytics</strong></td><td id="gZpQ" class="">Multi-city zones, corporate plans, analytics dashboards, mobile apps</td></tr></tbody></table><hr id="2933ddca-8541-802a-b0e4-d91d1b9ca2e1"/><h2 id="2933ddca-8541-8088-8f4b-e43ab204a763" class="">7️⃣ Strategic Outcomes</h2><ul id="2933ddca-8541-806c-a703-d046f4cf43dc" class="bulleted-list"><li style="list-style-type:disc"><strong>For Engineering:</strong> A robust multi-tenant architecture with role-aware permissions and scalable RLS.</li></ul><ul id="2933ddca-8541-804f-9d64-fb28f53dc1a3" class="bulleted-list"><li style="list-style-type:disc"><strong>For Operations:</strong> Transparent ecosystem of vendors, riders and consumers managed centrally.</li></ul><ul id="2933ddca-8541-8035-bbca-f3d508d97d50" class="bulleted-list"><li style="list-style-type:disc"><strong>For Business:</strong> Proof of product-market fit via Delhi NCR pilot and replicable model for other cities.</li></ul><hr id="2933ddca-8541-8021-99fe-fcbeacf0ccad"/><h1 id="2933ddca-8541-80ee-9287-dc6499882bf3" class="">System Architecture, Database Schema &amp; Role Management</h1><h2 id="2933ddca-8541-80ff-b149-c16b74fc12e3" class="">A) System Overview</h2><p id="2933ddca-8541-8009-8a39-d7afae87fe0b" class=""><strong>Stack (conceptual):</strong></p><ul id="2933ddca-8541-80d2-b78e-ce8c516f1626" class="bulleted-list"><li style="list-style-type:disc"><strong>Frontend:</strong> Next.js (App Router), Tailwind, shadcn/ui.</li></ul><ul id="2933ddca-8541-80bb-a27d-cd5785a09dd1" class="bulleted-list"><li style="list-style-type:disc"><strong>Backend:</strong> Supabase (Postgres, Auth, RLS, Realtime, Storage).</li></ul><ul id="2933ddca-8541-80d7-84d8-ca5cba063e6a" class="bulleted-list"><li style="list-style-type:disc"><strong>Auth:</strong> Phone OTP via Supabase Phone Provider + Twilio SMS.</li></ul><ul id="2933ddca-8541-804d-83c6-d9af4ec1f7ea" class="bulleted-list"><li style="list-style-type:disc"><strong>Payments (Phase 2+):</strong> Razorpay (Subscriptions/Orders).</li></ul><ul id="2933ddca-8541-80e2-9a56-cd3d507c6cda" class="bulleted-list"><li style="list-style-type:disc"><strong>Maps (Phase 1+):</strong> Google Maps Places/Geocoding.</li></ul><ul id="2933ddca-8541-806b-9345-ea5454ff7062" class="bulleted-list"><li style="list-style-type:disc"><strong>Monitoring/Analytics:</strong> Sentry + Mixpanel/PostHog.</li></ul><p id="2933ddca-8541-80b0-9b3c-de5bd59d8555" class=""><strong>High-level data flow:</strong></p><ol type="1" id="2933ddca-8541-80ee-8f1e-dadc990da6a8" class="numbered-list" start="1"><li>User enters phone → OTP via Twilio → verify → session established.</li></ol><ol type="1" id="2933ddca-8541-8070-9aa0-fc50ba9e62f6" class="numbered-list" start="2"><li>On first login, create <code>profiles</code> row (default role <code>consumer</code> unless coming from Vendor/Rider signup).</li></ol><ol type="1" id="2933ddca-8541-8057-9a7f-d31fbf603e00" class="numbered-list" start="3"><li>Role-specific signup creates linked row in <code>vendors</code> or <code>riders</code>.</li></ol><ol type="1" id="2933ddca-8541-80e6-861a-e64b909798af" class="numbered-list" start="4"><li>RLS gates reads/writes by <strong>role + ownership</strong>; Admin bypasses through privileged server actions.</li></ol><ol type="1" id="2933ddca-8541-800b-808f-e0c557463fd2" class="numbered-list" start="5"><li>Storage buckets hold images/videos/docs; public vendor assets are separate from sensitive docs.</li></ol><hr id="2933ddca-8541-80b2-a18b-d7ec94c1dfa8"/><h2 id="2933ddca-8541-80e6-9160-c4dabe24eced" class=""><strong>B) Authentication &amp; Role Management</strong></h2><h3 id="2933ddca-8541-80d0-bba5-d808a09a626b" class=""><strong>B1) Sign-up / Role Creation (self-serve)</strong></h3><table id="2933ddca-8541-804b-b1dc-fbc3182ac898" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-80b6-bf88-de140d96b4fb"><th id="nn~T" class="simple-table-header-color simple-table-header">Entry</th><th id="nFcN" class="simple-table-header-color simple-table-header">Path</th><th id="bsoU" class="simple-table-header-color simple-table-header">What it collects</th><th id=";Li|" class="simple-table-header-color simple-table-header">On OTP verify</th><th id=";akH" class="simple-table-header-color simple-table-header">Resulting roles/entities</th></tr></thead><tbody><tr id="2933ddca-8541-802f-b7a4-d706b3c9428d"><td id="nn~T" class=""><strong>Consumer sign-up (default)</strong></td><td id="nFcN" class=""><code>/auth/signup</code> (or button from <code>/login</code>)</td><td id="bsoU" class="">Full name, phone</td><td id=";Li|" class="">Create <code>profiles</code> row if first time</td><td id=";akH" class=""><code>profiles.roles</code> includes <code>consumer</code> (default), set <code>default_role=consumer</code></td></tr><tr id="2933ddca-8541-801a-a760-dca7cd146cfa"><td id="nn~T" class=""><strong>Vendor sign-up</strong></td><td id="nFcN" class=""><code>/auth/vendor-signup</code></td><td id="bsoU" class="">Full name, phone, kitchen address (basic), zone, (optional) FSSAI, short bio</td><td id=";Li|" class="">Ensure <code>profiles</code> row; add <code>vendor</code> to roles; create <code>vendors</code> row with <code>status=pending</code>, <code>kyc_status=pending</code></td><td id=";akH" class="">User now has <code>consumer</code> (if first time) <strong>and</strong> <code>vendor</code>; lands on Vendor dashboard with “Complete onboarding” banner</td></tr><tr id="2933ddca-8541-80c7-b499-ffcb1fcb62c0"><td id="nn~T" class=""><strong>Rider sign-up</strong></td><td id="nFcN" class=""><code>/auth/rider-signup</code></td><td id="bsoU" class="">Full name, phone, vehicle type, zone</td><td id=";Li|" class="">Ensure <code>profiles</code> row; add <code>rider</code> to roles; create <code>riders</code> row with <code>status=off/pending</code></td><td id=";akH" class="">User now has <code>rider</code> (plus <code>consumer</code> if first time)</td></tr><tr id="2933ddca-8541-80ba-8365-c218e4401b7f"><td id="nn~T" class=""><strong>Admin</strong></td><td id="nFcN" class="">—</td><td id="bsoU" class="">—</td><td id=";Li|" class="">—</td><td id=";akH" class="">Never self-serve; added by Admin via role assignment UI</td></tr></tbody></table><p id="2933ddca-8541-800d-bd12-cb25ff8cd71c" class=""><strong>Notes</strong></p><ul id="2933ddca-8541-806a-a14f-eb8366589263" class="bulleted-list"><li style="list-style-type:disc">One person can accumulate multiple roles over time under the same phone number.</li></ul><ul id="2933ddca-8541-8018-b323-e3cc666ca0cb" class="bulleted-list"><li style="list-style-type:disc">Joining a new role later is exposed in <strong>Account</strong> (e.g., “Join as Vendor/Rider”) and uses the same flows above.</li></ul><hr id="2933ddca-8541-8057-93cc-c33730c46e2d"/><h3 id="2933ddca-8541-8061-a55b-f0d7daeaee1a" class=""><strong>B2) Sign-in / Login Patterns (your new routes)</strong></h3><p id="2933ddca-8541-804c-aa83-c531f2ca86d0" class=""><strong>Common behavior for all logins</strong></p><ul id="2933ddca-8541-8064-a291-fa9ddfb388a9" class="bulleted-list"><li style="list-style-type:disc">Phone → OTP → verify → create session.</li></ul><ul id="2933ddca-8541-8028-92cb-d9c98ea25000" class="bulleted-list"><li style="list-style-type:disc">If the phone is <strong>not registered</strong>, prompt to <strong>sign up</strong> for a role (pick Consumer/Vendor/Rider).</li></ul><ul id="2933ddca-8541-8051-b6d1-e7a56d9443cf" class="bulleted-list"><li style="list-style-type:disc">Throttle OTP sends, limit attempts, handle expiry, and show friendly retry UX.</li></ul><p id="2933ddca-8541-80ae-8278-c75c22ec0efd" class=""><strong>Default Login</strong></p><ul id="2933ddca-8541-80cb-a290-f54231d5ce26" class="bulleted-list"><li style="list-style-type:disc"><strong>Path:</strong> <code>/login</code></li></ul><ul id="2933ddca-8541-80cc-9778-f8df253e7f0e" class="bulleted-list"><li style="list-style-type:disc"><strong>Routing on success:</strong><ol type="1" id="2933ddca-8541-80c2-bacd-e7e3d2fb2289" class="numbered-list" start="1"><li>Fetch <code>profiles.roles</code> and <code>default_role</code> (if set);</li></ol><ol type="1" id="2933ddca-8541-8076-8045-ecacb35a9396" class="numbered-list" start="2"><li>If <strong>multiple roles</strong> exist, send to <strong>last used role</strong> (persisted in profile or session);</li></ol><ol type="1" id="2933ddca-8541-80a1-ba25-e131d01aae3b" class="numbered-list" start="3"><li>If <strong>single role</strong>, send to that role’s dashboard;</li></ol><ol type="1" id="2933ddca-8541-8051-b84e-ff28019b276f" class="numbered-list" start="4"><li>If <strong>no roles</strong> (edge case), treat as consumer and send to <code>/dashboard/consumer</code>.</li></ol></li></ul><p id="2933ddca-8541-8048-8428-dde78606761d" class=""><strong>Role-specific Logins</strong></p><ul id="2933ddca-8541-8021-8b2e-e1760cfbcb82" class="bulleted-list"><li style="list-style-type:disc"><strong>Vendor Login:</strong> <code>/vendor-login</code> → always redirect to <strong>Vendor dashboard</strong>.<ul id="2933ddca-8541-80ee-bf45-fe3659167579" class="bulleted-list"><li style="list-style-type:circle">If user lacks <code>vendor</code> role, offer <strong>two choices</strong>: “Continue as Vendor (create vendor profile)” or “Switch to my current role”.</li></ul></li></ul><ul id="2933ddca-8541-8068-8de1-e71ff6caa983" class="bulleted-list"><li style="list-style-type:disc"><strong>Rider Login:</strong> <code>/rider-login</code> → always redirect to <strong>Rider dashboard</strong>.<ul id="2933ddca-8541-80f2-894e-c66c6485374b" class="bulleted-list"><li style="list-style-type:circle">If user lacks <code>rider</code> role, offer “Join as Rider” or “Switch to current role”.</li></ul></li></ul><ul id="2933ddca-8541-8044-beab-f03de507d2ee" class="bulleted-list"><li style="list-style-type:disc"><strong>Admin Login:</strong> <code>/admin-login</code> → always redirect to <strong>Admin dashboard</strong>.<ul id="2933ddca-8541-8079-ada5-e189fa9c7966" class="bulleted-list"><li style="list-style-type:circle">If user lacks <code>admin</code> role, show <strong>access denied</strong> with link to default <code>/login</code>.</li></ul></li></ul><p id="2933ddca-8541-8015-bd5f-dfc130b591e9" class=""><strong>Deep-link behaviors</strong></p><ul id="2933ddca-8541-808d-9ba8-d70e8fd00148" class="bulleted-list"><li style="list-style-type:disc">If a user hits a protected route for a role they <strong>don’t</strong> have (e.g., <code>/dashboard/vendor</code> without <code>vendor</code>):<ul id="2933ddca-8541-80cb-a817-c84ce6d3ad51" class="bulleted-list"><li style="list-style-type:circle">Show a <strong>“Not your current role”</strong> gate with:<ul id="2933ddca-8541-8021-aaea-d7a13441322d" class="bulleted-list"><li style="list-style-type:square">“Join this role” (if self-serve: vendor/rider) or</li></ul><ul id="2933ddca-8541-80b8-ac0d-db3da33efe58" class="bulleted-list"><li style="list-style-type:square">“Switch to my {available_role} dashboard” and</li></ul><ul id="2933ddca-8541-8016-b1bd-e219d748c91d" class="bulleted-list"><li style="list-style-type:square">For Admin routes, “Request access from an Admin” (no self-serve).</li></ul></li></ul></li></ul><hr id="2933ddca-8541-80e7-8c3d-ec422a62b8cf"/><h3 id="2933ddca-8541-805c-989a-cf5760120458" class=""><strong>B3) Role Resolution &amp; Dashboard Routing Rules</strong></h3><ol type="1" id="2933ddca-8541-8056-8850-d1e3952044b7" class="numbered-list" start="1"><li><strong>Determine candidate role</strong> from <strong>login entry point</strong> and <strong>stored preference</strong>:<ul id="2933ddca-8541-801b-a390-ef4300d1dd76" class="bulleted-list"><li style="list-style-type:disc">Role-specific logins override preference.</li></ul><ul id="2933ddca-8541-80eb-8497-d750e57c4c46" class="bulleted-list"><li style="list-style-type:disc">If default <code>/login</code>: use <code>last_used_role</code> if present; else <code>default_role</code>; else first role in roles array.</li></ul></li></ol><ol type="1" id="2933ddca-8541-8015-81e9-ed3f23d4d8b5" class="numbered-list" start="2"><li><strong>Validate</strong> the candidate role exists in <code>profiles.roles</code>.<ul id="2933ddca-8541-8046-9cd6-c40e89f212ad" class="bulleted-list"><li style="list-style-type:disc">If yes → redirect to <code>/dashboard/{role}</code>.</li></ul><ul id="2933ddca-8541-805d-a552-e33b1dfeeb57" class="bulleted-list"><li style="list-style-type:disc">If not:<ul id="2933ddca-8541-8064-862a-c527070e7dee" class="bulleted-list"><li style="list-style-type:circle">If role is <strong>vendor</strong> or <strong>rider</strong> → prompt to <strong>create</strong> that role (launch onboarding).</li></ul><ul id="2933ddca-8541-804b-a49d-de36c813af52" class="bulleted-list"><li style="list-style-type:circle">If role is <strong>admin</strong> → deny with guidance.</li></ul></li></ul></li></ol><ol type="1" id="2933ddca-8541-80cf-9793-d1c4d7d07099" class="numbered-list" start="3"><li><strong>Remember</strong> <code>last_used_role</code> after each successful dashboard landing (for <code>/login</code> future logins).</li></ol><hr id="2933ddca-8541-8072-b78c-eebc5da138b6"/><h3 id="2933ddca-8541-8043-9ba9-f7b094e3e01e" class=""><strong>B4) Role Lifecycle &amp; Ownership</strong></h3><ul id="2933ddca-8541-800a-b97a-c92d43c8c0bc" class="bulleted-list"><li style="list-style-type:disc"><strong>Consumer</strong><ul id="2933ddca-8541-8079-b4e3-e20f5634e2e6" class="bulleted-list"><li style="list-style-type:circle">Created by default on first registration.</li></ul><ul id="2933ddca-8541-808b-95ee-d552b241c30e" class="bulleted-list"><li style="list-style-type:circle">Can add addresses; later link subscriptions/orders.</li></ul></li></ul><ul id="2933ddca-8541-804d-84ed-ebf63bedf4b2" class="bulleted-list"><li style="list-style-type:disc"><strong>Vendor</strong><ul id="2933ddca-8541-801f-8b9e-f2a6b1191b69" class="bulleted-list"><li style="list-style-type:circle">Created when a user signs up as vendor or joins from Account.</li></ul><ul id="2933ddca-8541-8052-9245-c8050740c83b" class="bulleted-list"><li style="list-style-type:circle">Requires onboarding steps (completed in later phase) and <strong>Admin approval</strong> to become <code>active</code>.</li></ul><ul id="2933ddca-8541-80d9-bca7-c8e158eb8f7a" class="bulleted-list"><li style="list-style-type:circle">While <code>pending</code>, the user can still access Vendor dashboard but with limited actions and a status banner.</li></ul></li></ul><ul id="2933ddca-8541-8070-b417-d10aae7b624e" class="bulleted-list"><li style="list-style-type:disc"><strong>Rider</strong><ul id="2933ddca-8541-8075-b81f-f7190cbfd1c2" class="bulleted-list"><li style="list-style-type:circle">Created when a user signs up as rider or joins from Account.</li></ul><ul id="2933ddca-8541-80b5-af98-e8a98e084d82" class="bulleted-list"><li style="list-style-type:circle">Requires document upload and screening (later); can remain <code>off</code> until assigned.</li></ul></li></ul><ul id="2933ddca-8541-8048-a76a-e10f6a66b9b8" class="bulleted-list"><li style="list-style-type:disc"><strong>Admin</strong><ul id="2933ddca-8541-8065-9aa5-ce6ef776a5e3" class="bulleted-list"><li style="list-style-type:circle">Assigned manually by existing Admin; cannot self-assign.</li></ul></li></ul><ul id="2933ddca-8541-80e7-b0a8-d96113f02096" class="bulleted-list"><li style="list-style-type:disc"><strong>Suspension/Unavailability</strong><ul id="2933ddca-8541-808c-bf85-f098f27845fa" class="bulleted-list"><li style="list-style-type:circle">Vendor/Rider can be set <code>unavailable</code> or <code>suspended</code> without deleting.</li></ul><ul id="2933ddca-8541-8051-97e8-cd9c222c9a35" class="bulleted-list"><li style="list-style-type:circle">Consumer accounts can be deactivated (soft) for abuse or legal reasons.</li></ul></li></ul><hr id="2933ddca-8541-8069-a390-f0fc2b41db5f"/><h3 id="2933ddca-8541-80b6-b670-c84da05e572d" class=""><strong>B5) Access Control &amp; RLS Intent (summary)</strong></h3><table id="2933ddca-8541-80b7-9ac9-fe3038af1a9a" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-80b3-bdb8-cb33ddac9378"><th id="I\:A" class="simple-table-header-color simple-table-header">Area</th><th id="xaFw" class="simple-table-header-color simple-table-header">Consumer</th><th id="Bibx" class="simple-table-header-color simple-table-header">Vendor</th><th id="Jd&lt;Y" class="simple-table-header-color simple-table-header">Rider</th><th id="vKlw" class="simple-table-header-color simple-table-header">Admin</th><th id="xwOT" class="simple-table-header-color simple-table-header">Public</th></tr></thead><tbody><tr id="2933ddca-8541-80a6-afec-e7970047b3d0"><td id="I\:A" class="">Profiles</td><td id="xaFw" class="">R/U self</td><td id="Bibx" class="">R/U self</td><td id="Jd&lt;Y" class="">R/U self</td><td id="vKlw" class="">R/W all</td><td id="xwOT" class="">—</td></tr><tr id="2933ddca-8541-8026-b74e-e39e53c3cab1"><td id="I\:A" class="">Vendors (row)</td><td id="xaFw" class="">R <code>active</code> only</td><td id="Bibx" class="">R/W own</td><td id="Jd&lt;Y" class="">—</td><td id="vKlw" class="">R/W all</td><td id="xwOT" class="">R <code>active</code> only</td></tr><tr id="2933ddca-8541-807f-ae5c-f2fcbcbc5ebc"><td id="I\:A" class="">Vendor Media</td><td id="xaFw" class="">R <code>active</code> only</td><td id="Bibx" class="">R/W own</td><td id="Jd&lt;Y" class="">—</td><td id="vKlw" class="">R/W all</td><td id="xwOT" class="">R <code>active</code> only</td></tr><tr id="2933ddca-8541-8045-acdc-ef7873e168bb"><td id="I\:A" class="">Vendor Docs</td><td id="xaFw" class="">—</td><td id="Bibx" class="">R/W own</td><td id="Jd&lt;Y" class="">—</td><td id="vKlw" class="">R/W all</td><td id="xwOT" class="">—</td></tr><tr id="2933ddca-8541-809e-9fc9-e0c1e030b0e8"><td id="I\:A" class="">Riders (row)</td><td id="xaFw" class="">—</td><td id="Bibx" class="">—</td><td id="Jd&lt;Y" class="">R/W own</td><td id="vKlw" class="">R/W all</td><td id="xwOT" class="">—</td></tr><tr id="2933ddca-8541-80d0-81a7-d64cfef6de48"><td id="I\:A" class="">Addresses</td><td id="xaFw" class="">R/W own</td><td id="Bibx" class="">R/W own</td><td id="Jd&lt;Y" class="">R/W own</td><td id="vKlw" class="">R all</td><td id="xwOT" class="">—</td></tr><tr id="2933ddca-8541-80e4-b528-f483d89cc922"><td id="I\:A" class="">Meals</td><td id="xaFw" class="">R <code>active</code> only</td><td id="Bibx" class="">R/W own</td><td id="Jd&lt;Y" class="">—</td><td id="vKlw" class="">R/W all</td><td id="xwOT" class="">R <code>active</code> only</td></tr><tr id="2933ddca-8541-801c-a38d-df8643e3c4b5"><td id="I\:A" class="">Subscriptions/Orders (later)</td><td id="xaFw" class="">R/W own</td><td id="Bibx" class="">R own vendor’s orders</td><td id="Jd&lt;Y" class="">R assigned</td><td id="vKlw" class="">R/W all</td><td id="xwOT" class="">—</td></tr></tbody></table><ul id="2933ddca-8541-8091-86c2-d02142e2461d" class="bulleted-list"><li style="list-style-type:disc"><strong>Public</strong> can only view <strong>active vendor discovery</strong> data.</li></ul><ul id="2933ddca-8541-800b-9fb8-c5a7fd2514ca" class="bulleted-list"><li style="list-style-type:disc"><strong>Admin</strong> actions happen via privileged server logic; no service key on client.</li></ul><ul id="2933ddca-8541-8098-b97d-d29f37e18c96" class="bulleted-list"><li style="list-style-type:disc"><strong>Multi-role</strong> users must pass both <strong>role membership</strong> and <strong>ownership</strong> checks for writes.</li></ul><hr id="2933ddca-8541-804a-af6e-e9f0121558ed"/><h3 id="2933ddca-8541-8038-9a07-c4cb395d0ced" class=""><strong>B6) UX States &amp; Error Handling</strong></h3><ul id="2933ddca-8541-803d-8065-c4a322f4e4d0" class="bulleted-list"><li style="list-style-type:disc"><strong>OTP send</strong>: show timer; disable resend until interval passes; clear, friendly copy.</li></ul><ul id="2933ddca-8541-80bc-9dc9-e39116206168" class="bulleted-list"><li style="list-style-type:disc"><strong>OTP errors</strong>: invalid/expired OTP → retry with guidance; rate-limit feedback message.</li></ul><ul id="2933ddca-8541-80a7-887a-fd466515be75" class="bulleted-list"><li style="list-style-type:disc"><strong>Blocked account</strong>: show “account disabled/suspended” and support contact.</li></ul><ul id="2933ddca-8541-80fe-819a-c44176271f4d" class="bulleted-list"><li style="list-style-type:disc"><strong>No role match</strong>: explain next step (“Join as Vendor”, “Join as Rider”, or “Use default role”).</li></ul><ul id="2933ddca-8541-80a6-b067-f7bbea152380" class="bulleted-list"><li style="list-style-type:disc"><strong>Multiple roles</strong>: provide a <strong>Role Selector</strong> (modal/page) listing badges and last used time.</li></ul><ul id="2933ddca-8541-8096-bd3b-f67eb4305055" class="bulleted-list"><li style="list-style-type:disc"><strong>Session lost</strong>: redirect to appropriate login page, preserving intended path for post-login return.</li></ul><hr id="2933ddca-8541-808c-8bac-d0d6138e6992"/><h3 id="2933ddca-8541-802c-aaa7-c5c57a041763" class=""><strong>B7) Admin Capabilities Relevant to Auth</strong></h3><ul id="2933ddca-8541-8016-9484-fc22f55bc7f9" class="bulleted-list"><li style="list-style-type:disc">View all users; search by phone.</li></ul><ul id="2933ddca-8541-8093-9ada-e3815a3af0e0" class="bulleted-list"><li style="list-style-type:disc">Inspect <code>profiles.roles</code>, <code>default_role</code>, <code>last_used_role</code>.</li></ul><ul id="2933ddca-8541-8083-aaec-ed53931f008f" class="bulleted-list"><li style="list-style-type:disc">Change roles (add/remove) except <strong>cannot remove last remaining admin</strong>.</li></ul><ul id="2933ddca-8541-80d8-ac47-d4bc07eac76d" class="bulleted-list"><li style="list-style-type:disc">Force logout (revoke sessions) for security.</li></ul><ul id="2933ddca-8541-8082-808c-e16d8e9033c2" class="bulleted-list"><li style="list-style-type:disc">Approve vendor KYC (flip <code>kyc_status</code>/<code>status</code>).</li></ul><ul id="2933ddca-8541-80de-87f6-c733d0070f03" class="bulleted-list"><li style="list-style-type:disc">Suspend/unsuspend users, vendors, riders with reason + audit entry.</li></ul><hr id="2933ddca-8541-8096-97f2-c3b5fba638b5"/><h3 id="2933ddca-8541-80c4-9d32-dc7ba3a571cb" class=""><strong>B8) Audit &amp; Telemetry (auth-adjacent)</strong></h3><ul id="2933ddca-8541-80a4-9143-fc09994c87f0" class="bulleted-list"><li style="list-style-type:disc">Events to capture:<ul id="2933ddca-8541-806f-886b-f786ca07ea15" class="bulleted-list"><li style="list-style-type:circle"><code>otp_send_requested</code>, <code>otp_send_rate_limited</code>, <code>otp_verified_success</code>, <code>otp_verified_failed</code>,</li></ul><ul id="2933ddca-8541-804f-966e-cd8050be975f" class="bulleted-list"><li style="list-style-type:circle"><code>login_success_{role}</code>, <code>dashboard_view_{role}</code>, <code>role_added</code>, <code>role_removed</code>, <code>role_switch</code>.</li></ul></li></ul><ul id="2933ddca-8541-8080-a269-c984824c5b8e" class="bulleted-list"><li style="list-style-type:disc">Audit log entries for: role changes, admin approvals, suspensions.</li></ul><hr id="2933ddca-8541-8015-ab3c-f2e2f9c49d0e"/><h3 id="2933ddca-8541-8098-9d45-dc7a3c0ae228" class=""><strong>B9) Edge Cases to Test</strong></h3><ul id="2933ddca-8541-807b-bba2-e82e01a3accc" class="bulleted-list"><li style="list-style-type:disc">Phone exists but <strong>no roles</strong> yet → becomes <code>consumer</code>.</li></ul><ul id="2933ddca-8541-80c4-b67a-d6318d7fc7f2" class="bulleted-list"><li style="list-style-type:disc">Login via <code>/vendor-login</code> when user is only <code>consumer</code> → offer “Join as Vendor”.</li></ul><ul id="2933ddca-8541-80d2-aa3c-cd38ecf6f576" class="bulleted-list"><li style="list-style-type:disc">Login via <code>/admin-login</code> without admin → show access denied, link to <code>/login</code>.</li></ul><ul id="2933ddca-8541-8043-9ac0-c532dbfe0d5f" class="bulleted-list"><li style="list-style-type:disc">User has <strong>three roles</strong>; <code>/login</code> goes to <strong>last used</strong> role consistently.</li></ul><ul id="2933ddca-8541-8096-b6a3-e74e118762ed" class="bulleted-list"><li style="list-style-type:disc">OTP throttling and expiry work; device/session remembered; logout clears correctly.</li></ul><ul id="2933ddca-8541-80f6-aa23-e2b03394acc1" class="bulleted-list"><li style="list-style-type:disc">RLS prevents reading another user’s profile via direct API.</li></ul><hr id="2933ddca-8541-807b-857b-ec66e118ff2b"/><h2 id="2933ddca-8541-80b1-b20d-e81489f2f4e3" class="">C) Database Schema (Detailed)</h2><blockquote id="2933ddca-8541-80d6-86db-c826f6ad08cb" class="">Goal: stable core for all phases. Use UUID primary keys, created_at/updated_at timestamps everywhere, and soft status enums. Names below are canonical; adapt minimally as needed.</blockquote><h3 id="2933ddca-8541-807d-8376-eb7fd24b1cd3" class="">C1) Identity &amp; Geography</h3><table id="2933ddca-8541-800c-acbf-d54174cebb1a" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-80f9-93ad-fc49d9446f4a"><th id="n:I&lt;" class="simple-table-header-color simple-table-header">Table</th><th id="uBQK" class="simple-table-header-color simple-table-header">Purpose</th><th id="A:?F" class="simple-table-header-color simple-table-header">Key Columns</th><th id="G|x`" class="simple-table-header-color simple-table-header">Notes</th></tr></thead><tbody><tr id="2933ddca-8541-80d1-9c3f-cd1f3e313960"><td id="n:I&lt;" class=""><strong>profiles</strong></td><td id="uBQK" class="">Canonical user record (1:1 with auth user)</td><td id="A:?F" class=""><code>id (auth FK)</code>, <code>full_name</code>, <code>phone</code>, <code>email?</code>, <code>photo_url</code>, <code>roles</code> (array: <code>consumer</code>, <code>vendor</code>, <code>rider</code>, <code>admin</code>), <code>default_role</code>, <code>zone_id</code>, <code>created_at</code></td><td id="G|x`" class=""><code>roles</code> stores all roles granted; <code>default_role</code> used for landing.</td></tr><tr id="2933ddca-8541-8011-bac3-ccdfc23df3e7"><td id="n:I&lt;" class=""><strong>zones</strong></td><td id="uBQK" class="">Operational areas</td><td id="A:?F" class=""><code>id</code>, <code>name</code>, <code>polygon? json</code>, <code>active</code></td><td id="G|x`" class="">Start with name; add polygon later for auto-zone.</td></tr><tr id="2933ddca-8541-8047-ad69-cb1527d62745"><td id="n:I&lt;" class=""><strong>addresses</strong></td><td id="uBQK" class="">User addresses</td><td id="A:?F" class=""><code>id</code>, <code>user_id (profiles)</code>, <code>label</code> (<code>pg</code>, <code>home</code>, <code>office</code>, <code>kitchen</code>), <code>line1</code>, <code>lat</code>, <code>lng</code>, <code>is_default</code>, <code>created_at</code></td><td id="G|x`" class="">Vendors’ kitchen address links here.</td></tr></tbody></table><h3 id="2933ddca-8541-80ea-84da-fe853bf47d85" class="">C2) Vendors &amp; Content</h3><table id="2933ddca-8541-80fc-af58-fdea8d79f9df" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-8025-8209-f6a9a3e555b8"><th id="EZtD" class="simple-table-header-color simple-table-header">Table</th><th id="r&gt;z=" class="simple-table-header-color simple-table-header">Purpose</th><th id="&gt;KtR" class="simple-table-header-color simple-table-header">Key Columns</th><th id="BIw[" class="simple-table-header-color simple-table-header">Notes</th></tr></thead><tbody><tr id="2933ddca-8541-8046-8a0e-d2c1bd0ca005"><td id="EZtD" class=""><strong>vendors</strong></td><td id="r&gt;z=" class="">Vendor (home-chef) entity</td><td id="&gt;KtR" class=""><code>id</code>, <code>user_id (profiles)</code>, <code>display_name</code>, <code>bio</code>, <code>fssai_no?</code>, <code>zone_id</code>, <code>kitchen_address_id (addresses)</code>, <code>veg_only</code>, <code>capacity_breakfast/lunch/dinner</code> (int), <code>status</code> (<code>pending</code>, <code>active</code>, <code>unavailable</code>, <code>suspended</code>), <code>kyc_status</code> (<code>pending</code>, <code>approved</code>, <code>rejected</code>), <code>rating_avg</code>, <code>rating_count</code>, <code>created_at</code></td><td id="BIw[" class="">Created on vendor signup; Admin toggles <code>status/kyc_status</code>.</td></tr><tr id="2933ddca-8541-805a-b974-e5d854fd27b5"><td id="EZtD" class=""><strong>vendor_media</strong></td><td id="r&gt;z=" class="">Public visuals &amp; intro video</td><td id="&gt;KtR" class=""><code>id</code>, <code>vendor_id</code>, <code>media_type</code> (<code>profile</code>, <code>cover</code>, <code>gallery</code>, <code>intro_video</code>), <code>url</code>, <code>created_at</code></td><td id="BIw[" class="">Public assets only.</td></tr><tr id="2933ddca-8541-808b-9d06-d7a0ff3d7d15"><td id="EZtD" class=""><strong>vendor_docs</strong></td><td id="r&gt;z=" class="">Sensitive docs</td><td id="&gt;KtR" class=""><code>id</code>, <code>vendor_id</code>, <code>doc_type</code> (<code>fssai</code>, <code>kyc_id_front</code>, <code>kyc_id_back</code>, …), <code>url</code>, <code>verified_by_admin?</code>, <code>created_at</code></td><td id="BIw[" class="">Private bucket; Admin-only read.</td></tr><tr id="2933ddca-8541-800f-97ea-fc777954476e"><td id="EZtD" class=""><strong>meals</strong></td><td id="r&gt;z=" class="">Menu items per slot</td><td id="&gt;KtR" class=""><code>id</code>, <code>vendor_id</code>, <code>slot</code> (<code>breakfast</code>, <code>lunch</code>, <code>dinner</code>), <code>name</code>, <code>description?</code>, <code>items text[]</code>, <code>is_veg</code>, <code>image_url</code>, <code>active</code>, <code>created_at</code></td><td id="BIw[" class="">Slotted items; pricing stored at plan/subscription level later.</td></tr><tr id="2933ddca-8541-8012-9c90-cbb4fc59b6af"><td id="EZtD" class=""><strong>ratings</strong></td><td id="r&gt;z=" class="">Consumer→Vendor feedback</td><td id="&gt;KtR" class=""><code>id</code>, <code>vendor_id</code>, <code>consumer_id</code>, <code>score</code> (1–5), <code>comment?</code>, <code>created_at</code></td><td id="BIw[" class="">Insert later (Phase 2+); read public.</td></tr></tbody></table><h3 id="2933ddca-8541-8050-8829-ffa8ca089579" class="">C3) Riders &amp; Delivery (scaffold now, expand later)</h3><table id="2933ddca-8541-805b-aabc-e89eb1665328" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-8089-a7ab-d7338b59b9e8"><th id="UQQ_" class="simple-table-header-color simple-table-header">Table</th><th id="DDYI" class="simple-table-header-color simple-table-header">Purpose</th><th id="?c}u" class="simple-table-header-color simple-table-header">Key Columns</th><th id="^aIf" class="simple-table-header-color simple-table-header">Notes</th></tr></thead><tbody><tr id="2933ddca-8541-80bf-b922-f6724101ad25"><td id="UQQ_" class=""><strong>riders</strong></td><td id="DDYI" class="">Rider profile</td><td id="?c}u" class=""><code>id</code>, <code>user_id (profiles)</code>, <code>vehicle_type</code> (<code>bike</code>, <code>ev_bike</code>, <code>ev_truck</code>, <code>other</code>), <code>zone_id</code>, <code>status</code> (<code>active</code>, <code>off</code>, <code>suspended</code>), <code>created_at</code></td><td id="^aIf" class="">Created on rider signup.</td></tr><tr id="2933ddca-8541-80e9-90b2-ff050196c98d"><td id="UQQ_" class=""><strong>rider_docs</strong></td><td id="DDYI" class="">DL/ID docs</td><td id="?c}u" class=""><code>id</code>, <code>rider_id</code>, <code>doc_type</code>, <code>url</code>, <code>verified</code>, <code>created_at</code></td><td id="^aIf" class="">Private.</td></tr><tr id="2933ddca-8541-803a-91a5-e43ebf422db9"><td id="UQQ_" class=""><strong>routes</strong> (Phase 3)</td><td id="DDYI" class="">Route batch</td><td id="?c}u" class=""><code>id</code>, <code>zone_id</code>, <code>slot</code> (<code>breakfast</code>/<code>lunch</code>/<code>dinner</code>), <code>date</code>, <code>rider_id</code>, <code>status</code>, <code>created_at</code></td><td id="^aIf" class="">Generated by dispatch.</td></tr><tr id="2933ddca-8541-80c1-a858-fc01adcde037"><td id="UQQ_" class=""><strong>stops</strong> (Phase 3)</td><td id="DDYI" class="">Route stops</td><td id="?c}u" class=""><code>id</code>, <code>route_id</code>, <code>seq</code>, <code>type</code> (<code>pickup</code>/<code>drop</code>), <code>vendor_id?</code>, <code>order_id?</code>, <code>eta</code>, <code>status</code>, <code>arrived_at?</code>, <code>completed_at?</code></td><td id="^aIf" class="">OTP/Proof linked at delivery.</td></tr><tr id="2933ddca-8541-80e4-990d-fdd0d65a6bd0"><td id="UQQ_" class=""><strong>delivery_proofs</strong> (Phase 3)</td><td id="DDYI" class="">OTP/geo proof</td><td id="?c}u" class=""><code>id</code>, <code>stop_id</code>, <code>otp</code>, <code>photo_url?</code>, <code>lat</code>, <code>lng</code>, <code>ts</code></td><td id="^aIf" class="">Verified at drop.</td></tr></tbody></table><h3 id="2933ddca-8541-8097-bdec-cd6ae5cee6d5" class="">C4) Commerce (Phase 2+)</h3><table id="2933ddca-8541-8035-9ce3-d1e00ec80863" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-800c-95a7-dc806aee0af4"><th id="CrJv" class="simple-table-header-color simple-table-header">Table</th><th id="?&lt;@h" class="simple-table-header-color simple-table-header">Purpose</th><th id="gpr@" class="simple-table-header-color simple-table-header">Key Columns</th><th id="qo|:" class="simple-table-header-color simple-table-header">Notes</th></tr></thead><tbody><tr id="2933ddca-8541-80fd-82bb-ddf933a6af50"><td id="CrJv" class=""><strong>plans</strong></td><td id="?&lt;@h" class="">Plan templates</td><td id="gpr@" class=""><code>id</code>, <code>name</code>, <code>period</code> (<code>weekly</code>, <code>biweekly</code>, <code>monthly</code>), <code>meals_per_day</code> (B/L/D flags), <code>base_price</code>, <code>currency</code>, <code>active</code></td><td id="qo|:" class="">SKU-like.</td></tr><tr id="2933ddca-8541-80df-8d27-e10dc948c07f"><td id="CrJv" class=""><strong>subscriptions</strong></td><td id="?&lt;@h" class="">Consumer↔Vendor contract</td><td id="gpr@" class=""><code>id</code>, <code>consumer_id (profiles)</code>, <code>vendor_id</code>, <code>plan_id</code>, <code>billing_type</code> (<code>auto</code>, <code>prepaid</code>), <code>status</code> (<code>trial</code>, <code>active</code>, <code>paused</code>, <code>cancelled</code>), <code>starts_on</code>, <code>renews_on?</code>, <code>created_at</code></td><td id="qo|:" class="">“Contract” table.</td></tr><tr id="2933ddca-8541-80be-9afa-f61f9b115d49"><td id="CrJv" class=""><strong>subscription_prefs</strong></td><td id="?&lt;@h" class="">Customization</td><td id="gpr@" class=""><code>id</code>, <code>subscription_id</code>, <code>slot</code>, <code>preferred_items text[]</code>, <code>days_of_week int[]</code>, <code>time_window</code></td><td id="qo|:" class="">Personalization per slot.</td></tr><tr id="2933ddca-8541-80e8-83ff-e1ff3602895f"><td id="CrJv" class=""><strong>orders</strong></td><td id="?&lt;@h" class="">Daily meal instances</td><td id="gpr@" class=""><code>id</code>, <code>subscription_id</code>, <code>date</code>, <code>slot</code>, <code>consumer_id</code>, <code>vendor_id</code>, <code>status</code> (<code>scheduled</code>, <code>preparing</code>, <code>ready</code>, <code>picked</code>, <code>delivered</code>, `failed:NNA</td><td id="qo|:" class="">address</td></tr><tr id="2933ddca-8541-8002-8a0e-fb24c063d684"><td id="CrJv" class=""><strong>payments</strong></td><td id="?&lt;@h" class="">Razorpay records</td><td id="gpr@" class=""><code>id</code>, <code>subscription_id?</code>, <code>order_id?</code>, <code>provider</code> (<code>razorpay</code>), <code>amount</code>, <code>status</code>, <code>provider_ref</code>, <code>created_at</code></td><td id="qo|:" class="">Reconciliation.</td></tr><tr id="2933ddca-8541-809d-a5a9-dbaaaee99052"><td id="CrJv" class=""><strong>payouts_vendor</strong></td><td id="?&lt;@h" class="">Vendor settlements</td><td id="gpr@" class=""><code>id</code>, <code>vendor_id</code>, <code>period_start</code>, <code>period_end</code>, <code>amount</code>, <code>status</code>, <code>created_at</code></td><td id="qo|:" class="">Weekly in Phase 3+.</td></tr><tr id="2933ddca-8541-80ba-828c-ff2cdb7f5371"><td id="CrJv" class=""><strong>payouts_rider</strong></td><td id="?&lt;@h" class="">Rider settlements</td><td id="gpr@" class=""><code>id</code>, <code>rider_id</code>, <code>period_start</code>, <code>period_end</code>, <code>amount</code>, <code>status</code>, <code>created_at</code></td><td id="qo|:" class="">Weekly in Phase 3+.</td></tr></tbody></table><h3 id="2933ddca-8541-80a5-8538-cea4e3435f1c" class="">C5) Support, Ops &amp; Audit (Phase 3+)</h3><table id="2933ddca-8541-80b0-ad68-dc5a61ac937c" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-80dd-bf2a-cd86a97cfb91"><th id="qe;e" class="simple-table-header-color simple-table-header">Table</th><th id="?Nh&lt;" class="simple-table-header-color simple-table-header">Purpose</th><th id="|`@^" class="simple-table-header-color simple-table-header">Key Columns</th></tr></thead><tbody><tr id="2933ddca-8541-80ce-ac8e-c47992ffac23"><td id="qe;e" class=""><strong>tickets</strong></td><td id="?Nh&lt;" class="">Consumer issues</td><td id="|`@^" class=""><code>id</code>, <code>order_id?</code>, <code>consumer_id</code>, <code>vendor_id?</code>, <code>type</code> (<code>late</code>, <code>missing</code>, <code>quality</code>, <code>payment</code>, <code>address</code>), <code>status</code> (<code>open</code>, <code>actioned</code>, <code>closed</code>), <code>resolution</code></td></tr><tr id="2933ddca-8541-80c8-a081-c23e97ae0c22"><td id="qe;e" class=""><strong>audit_log</strong></td><td id="?Nh&lt;" class="">Who changed what</td><td id="|`@^" class=""><code>id</code>, <code>actor_id (profiles)</code>, <code>entity</code> (<code>vendor</code>, <code>profile</code>, <code>subscription</code>, …), <code>entity_id</code>, <code>action</code>, <code>data jsonb</code>, <code>ts</code></td></tr></tbody></table><hr id="2933ddca-8541-807b-b3d3-e224349a238f"/><h2 id="2933ddca-8541-80b1-8e88-f40efb3ec921" class="">D) Storage Buckets &amp; Asset Policy</h2><ul id="2933ddca-8541-808d-a094-cd7d248fcab6" class="bulleted-list"><li style="list-style-type:disc"><code><strong>vendor-media</strong></code> (public): profile, cover, gallery, intro video.</li></ul><ul id="2933ddca-8541-8089-85f5-ff8e8aafd0ad" class="bulleted-list"><li style="list-style-type:disc"><code><strong>vendor-docs</strong></code> (private): FSSAI/KYC documents.</li></ul><ul id="2933ddca-8541-80c6-b274-cbc903a8c6a6" class="bulleted-list"><li style="list-style-type:disc"><code><strong>rider-docs</strong></code> (private): DL/Aadhaar.</li></ul><ul id="2933ddca-8541-80f1-8645-c1bb498d5cd4" class="bulleted-list"><li style="list-style-type:disc"><code><strong>order-proofs</strong></code> (private): delivery photos/signatures.</li></ul><p id="2933ddca-8541-808c-8eb1-f859be4749ee" class=""><strong>Retention &amp; size guidance:</strong></p><ul id="2933ddca-8541-8017-985f-cbe308bc2e9b" class="bulleted-list"><li style="list-style-type:disc">Images ≤ 2–3 MB; convert to webp where possible.</li></ul><ul id="2933ddca-8541-801e-9c3d-fb5f6169ea10" class="bulleted-list"><li style="list-style-type:disc">Videos ≤ ~60s; compress client-side.</li></ul><ul id="2933ddca-8541-801c-b96d-f98231482c43" class="bulleted-list"><li style="list-style-type:disc">Proof photos retained for N days (configurable) for privacy.</li></ul><hr id="2933ddca-8541-80f4-81a9-cddcac16b1d9"/><h2 id="2933ddca-8541-8039-8516-d548b0ebb17f" class="">E) Permissions Model (RLS &amp; Access Matrix)</h2><blockquote id="2933ddca-8541-805f-8a41-f09c88d3796f" class="">Describe intent precisely so policies are easy to implement and test.</blockquote><h3 id="2933ddca-8541-8047-aab1-f59a59174c9f" class="">E1) Read/Write matrix (core tables)</h3><table id="2933ddca-8541-80cb-95cf-d13b0df904a2" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-8010-9843-db74792f404d"><th id="hJ@`" class="simple-table-header-color simple-table-header">Table</th><th id="hEYa" class="simple-table-header-color simple-table-header">Public</th><th id="Ck^H" class="simple-table-header-color simple-table-header">Consumer</th><th id="DOYA" class="simple-table-header-color simple-table-header">Vendor</th><th id="KQon" class="simple-table-header-color simple-table-header">Rider</th><th id=";M}V" class="simple-table-header-color simple-table-header">Admin</th></tr></thead><tbody><tr id="2933ddca-8541-8077-899f-d840ad7a388a"><td id="hJ@`" class=""><code>profiles</code></td><td id="hEYa" class="">No</td><td id="Ck^H" class=""><strong>R</strong> (self) / <strong>U</strong> (self)</td><td id="DOYA" class=""><strong>R/U</strong> (self)</td><td id="KQon" class=""><strong>R/U</strong> (self)</td><td id=";M}V" class=""><strong>R/W</strong> all</td></tr><tr id="2933ddca-8541-8093-befe-eb568d877d2d"><td id="hJ@`" class=""><code>zones</code></td><td id="hEYa" class=""><strong>R</strong> active</td><td id="Ck^H" class=""><strong>R</strong></td><td id="DOYA" class=""><strong>R</strong></td><td id="KQon" class=""><strong>R</strong></td><td id=";M}V" class=""><strong>R/W</strong></td></tr><tr id="2933ddca-8541-8023-9a6b-c9ee57656bf9"><td id="hJ@`" class=""><code>addresses</code></td><td id="hEYa" class="">No</td><td id="Ck^H" class=""><strong>R/W</strong> own</td><td id="DOYA" class=""><strong>R/W</strong> own</td><td id="KQon" class=""><strong>R/W</strong> own</td><td id=";M}V" class=""><strong>R</strong> all</td></tr><tr id="2933ddca-8541-809f-98fd-db4945cd1301"><td id="hJ@`" class=""><code>vendors</code></td><td id="hEYa" class=""><strong>R</strong> only where <code>status=active</code></td><td id="Ck^H" class=""><strong>R</strong> active</td><td id="DOYA" class=""><strong>R/W</strong> own row</td><td id="KQon" class="">No</td><td id=";M}V" class=""><strong>R/W</strong> all</td></tr><tr id="2933ddca-8541-80c8-af8b-eb19e1ce533b"><td id="hJ@`" class=""><code>vendor_media</code></td><td id="hEYa" class=""><strong>R</strong> if vendor is <code>active</code></td><td id="Ck^H" class=""><strong>R</strong></td><td id="DOYA" class=""><strong>R/W</strong> where vendor owned</td><td id="KQon" class="">No</td><td id=";M}V" class=""><strong>R/W</strong> all</td></tr><tr id="2933ddca-8541-80dd-8b86-c451d2bde7cc"><td id="hJ@`" class=""><code>vendor_docs</code></td><td id="hEYa" class="">No</td><td id="Ck^H" class="">No</td><td id="DOYA" class=""><strong>R/W</strong> own</td><td id="KQon" class="">No</td><td id=";M}V" class=""><strong>R/W</strong></td></tr><tr id="2933ddca-8541-8091-b578-d3794cd70e7d"><td id="hJ@`" class=""><code>meals</code></td><td id="hEYa" class=""><strong>R</strong> where vendor <code>active</code></td><td id="Ck^H" class=""><strong>R</strong></td><td id="DOYA" class=""><strong>R/W</strong> own</td><td id="KQon" class="">No</td><td id=";M}V" class=""><strong>R/W</strong></td></tr><tr id="2933ddca-8541-80ca-9ae3-f88327ef1e69"><td id="hJ@`" class=""><code>riders</code></td><td id="hEYa" class="">No</td><td id="Ck^H" class="">No</td><td id="DOYA" class="">No</td><td id="KQon" class=""><strong>R/W</strong> own</td><td id=";M}V" class=""><strong>R/W</strong> all</td></tr><tr id="2933ddca-8541-80c8-9393-de9257147d24"><td id="hJ@`" class=""><code>routes</code>, <code>stops</code></td><td id="hEYa" class="">No</td><td id="Ck^H" class=""><strong>R</strong> own orders (Phase 3)</td><td id="DOYA" class=""><strong>R</strong> own pickups (Phase 3)</td><td id="KQon" class=""><strong>R/W</strong> assigned</td><td id=";M}V" class=""><strong>R/W</strong></td></tr><tr id="2933ddca-8541-805e-aa82-e2578d471d80"><td id="hJ@`" class=""><code>subscriptions</code>, <code>orders</code></td><td id="hEYa" class="">No</td><td id="Ck^H" class=""><strong>R/W</strong> own</td><td id="DOYA" class=""><strong>R</strong> own vendor’s orders</td><td id="KQon" class=""><strong>R</strong> assigned stops</td><td id=";M}V" class=""><strong>R/W</strong></td></tr><tr id="2933ddca-8541-80d9-bfb3-c9f534a136f5"><td id="hJ@`" class=""><code>ratings</code></td><td id="hEYa" class=""><strong>R</strong></td><td id="Ck^H" class=""><strong>R/W</strong> (self)</td><td id="DOYA" class=""><strong>R</strong> (about me)</td><td id="KQon" class="">No</td><td id=";M}V" class=""><strong>R/W</strong></td></tr><tr id="2933ddca-8541-80c8-8a78-f85740b98395"><td id="hJ@`" class=""><code>tickets</code></td><td id="hEYa" class="">No</td><td id="Ck^H" class=""><strong>R/W</strong> own</td><td id="DOYA" class=""><strong>R</strong> related</td><td id="KQon" class=""><strong>R</strong> related</td><td id=";M}V" class=""><strong>R/W</strong></td></tr></tbody></table><p id="2933ddca-8541-8077-9b05-c0828b6a4fbe" class=""><strong>Notes:</strong></p><ul id="2933ddca-8541-80ce-b26b-c117fb718c28" class="bulleted-list"><li style="list-style-type:disc">“Own” is defined by <code>user_id</code> linkage (profiles→vendor/rider) or entity’s <code>consumer_id</code>.</li></ul><ul id="2933ddca-8541-800b-8625-eb2b41d7622f" class="bulleted-list"><li style="list-style-type:disc">Public read is limited to vendor discovery assets (active vendors + meals + media).</li></ul><ul id="2933ddca-8541-806e-8991-c23c9b6b451e" class="bulleted-list"><li style="list-style-type:disc">Admin actions are executed through privileged server actions; never expose service role to clients.</li></ul><h3 id="2933ddca-8541-8075-970c-de9b12bf98ca" class="">E2) Role mutation rules</h3><ul id="2933ddca-8541-80b3-832d-d45e78f950a0" class="bulleted-list"><li style="list-style-type:disc">Only <strong>Admin</strong> can add/remove roles to <code>profiles.roles</code> (except role inferred at first signup).</li></ul><ul id="2933ddca-8541-804e-9535-c542e1031b24" class="bulleted-list"><li style="list-style-type:disc">When a user “joins” a new role (e.g., Vendor), app creates the role entity and <strong>requests</strong> Admin approval (if needed) before activating <code>status</code>.</li></ul><ul id="2933ddca-8541-80ce-bced-f90fadf2be32" class="bulleted-list"><li style="list-style-type:disc">Deleting roles: do not cascade delete entities with financial history; use <code>status=&#x27;suspended&#x27;</code>.</li></ul><hr id="2933ddca-8541-804f-bd48-fe690065b7f4"/><h2 id="2933ddca-8541-803b-b37a-f06a2dde72fe" class="">F) Data Constraints, Indexing, &amp; Integrity</h2><ul id="2933ddca-8541-8021-b976-d3cdc99b4aba" class="bulleted-list"><li style="list-style-type:disc"><strong>Enums</strong>: Use constrained text/enums for <code>status</code>, <code>slot</code>, <code>vehicle_type</code>, <code>kyc_status</code>.</li></ul><ul id="2933ddca-8541-802b-ae16-e767ee97fd0c" class="bulleted-list"><li style="list-style-type:disc"><strong>Uniqueness</strong>:<ul id="2933ddca-8541-809b-b8ed-c6a4796e35fa" class="bulleted-list"><li style="list-style-type:circle">A <code>profiles.id</code> is unique (auth FK).</li></ul><ul id="2933ddca-8541-80df-8336-d7040bcca33d" class="bulleted-list"><li style="list-style-type:circle">Optional: unique <code>phone</code> across profiles (if stored).</li></ul><ul id="2933ddca-8541-8076-9461-db19dd3986bb" class="bulleted-list"><li style="list-style-type:circle">One <code>vendors.user_id</code> per user (enforce unique when “one vendor per user” is desired).</li></ul></li></ul><ul id="2933ddca-8541-805f-b4ef-eb4846bd73c1" class="bulleted-list"><li style="list-style-type:disc"><strong>Foreign keys</strong>: All relations reference parent entities with <code>ON DELETE RESTRICT</code> unless clearly safe (e.g., addresses may <code>SET NULL</code>).</li></ul><ul id="2933ddca-8541-803a-b1a8-edd853f33ff7" class="bulleted-list"><li style="list-style-type:disc"><strong>Indexes</strong>:<ul id="2933ddca-8541-80e9-b415-fff29a6db74c" class="bulleted-list"><li style="list-style-type:circle"><code>vendors (status, zone_id)</code> for discovery.</li></ul><ul id="2933ddca-8541-804a-8ac9-c4f1c25d23bd" class="bulleted-list"><li style="list-style-type:circle"><code>meals (vendor_id, slot, active)</code> for vendor page tabs.</li></ul><ul id="2933ddca-8541-80e1-8421-d4185931ad97" class="bulleted-list"><li style="list-style-type:circle"><code>orders (date, vendor_id, consumer_id, status)</code> for ops.</li></ul><ul id="2933ddca-8541-8076-9165-c0f8f7e78912" class="bulleted-list"><li style="list-style-type:circle"><code>subscriptions (consumer_id, vendor_id, status)</code> for account pages.</li></ul></li></ul><ul id="2933ddca-8541-809e-9c11-f3768ec7cb6a" class="bulleted-list"><li style="list-style-type:disc"><strong>Timestamps</strong>: <code>created_at</code> default now; <code>updated_at</code> maintained via triggers or app logic.</li></ul><ul id="2933ddca-8541-8067-a4b8-d703e6b9e344" class="bulleted-list"><li style="list-style-type:disc"><strong>Soft status vs hard deletes</strong>: Prefer <strong>status flags</strong> (<code>suspended</code>, <code>unavailable</code>) over delete for auditability.</li></ul><hr id="2933ddca-8541-8026-9def-c6c1f3042d13"/><h2 id="2933ddca-8541-80e8-84e3-fc2be584fd1b" class="">G) Events &amp; Background Jobs (when you reach those phases)</h2><ul id="2933ddca-8541-80df-be96-ed7374ccd2c3" class="bulleted-list"><li style="list-style-type:disc"><strong>Nightly Subscription Expansion</strong> (Phase 2): expand active subscriptions → <code>orders</code> for the next day, honoring pause/skip and capacity.</li></ul><ul id="2933ddca-8541-80fb-bce6-c587eda2ffab" class="bulleted-list"><li style="list-style-type:disc"><strong>Auto-cancellation</strong>: cancel orders that miss vendor ready window (Phase 3).</li></ul><ul id="2933ddca-8541-8008-9b07-ef0381e087a0" class="bulleted-list"><li style="list-style-type:disc"><strong>Payout cycles</strong>: aggregate delivered orders → weekly vendor/rider payouts (Phase 3+).</li></ul><ul id="2933ddca-8541-8093-bddc-d47fabb04a33" class="bulleted-list"><li style="list-style-type:disc"><strong>Notifications</strong>: SMS/WhatsApp triggers for OTP, assignment, delivery statuses (configurable).</li></ul><hr id="2933ddca-8541-804d-90f4-f3bc179053f2"/><h2 id="2933ddca-8541-80ac-8747-c804e86646ac" class="">H) Public Surfaces &amp; API Footprint (conceptual)</h2><ul id="2933ddca-8541-802f-af0c-e1c6f27caad6" class="bulleted-list"><li style="list-style-type:disc"><strong>Public pages</strong>: <code>/vendors</code>, <code>/vendor/[id]</code> read <strong>only</strong> from active vendors/meals/media.</li></ul><ul id="2933ddca-8541-806f-8ce7-c14183fc2a52" class="bulleted-list"><li style="list-style-type:disc"><strong>Auth endpoints</strong>: phone → OTP → verify (Supabase).</li></ul><ul id="2933ddca-8541-80e9-a735-f48b00963888" class="bulleted-list"><li style="list-style-type:disc"><strong>Admin server actions</strong> (privileged): update <code>profiles.roles</code>, set <code>vendors.status/kyc_status</code>, create zones, manual adjustments.</li></ul><ul id="2933ddca-8541-806b-96cd-f6462bac73d3" class="bulleted-list"><li style="list-style-type:disc"><strong>Future API</strong>: expose stable JSON endpoints (or server actions) for mobile apps; same RLS applies.</li></ul><hr id="2933ddca-8541-8079-b97a-f22062903900"/><h2 id="2933ddca-8541-8085-b6a1-fedc0d6db121" class="">I) Data Privacy &amp; Compliance</h2><ul id="2933ddca-8541-8017-9358-c3b40f51c387" class="bulleted-list"><li style="list-style-type:disc">Keep KYC/FSSAI in <strong>private buckets</strong>; expose only Admin or the entity owner.</li></ul><ul id="2933ddca-8541-80b1-a4eb-fa4f9a01b7c6" class="bulleted-list"><li style="list-style-type:disc">No phone numbers or addresses in public responses.</li></ul><ul id="2933ddca-8541-807d-aeef-ca46c51a7ef7" class="bulleted-list"><li style="list-style-type:disc">Delivery proofs retained per policy; provide purge tooling.</li></ul><ul id="2933ddca-8541-8001-9468-db46dfc5897c" class="bulleted-list"><li style="list-style-type:disc">Audit-log any role changes, KYC approvals, and payout actions.</li></ul><hr id="2933ddca-8541-804b-bdbf-ff8eb46691c2"/><h2 id="2933ddca-8541-8009-b56d-e2a74c28f481" class="">J) Test Matrix (what to verify)</h2><ol type="1" id="2933ddca-8541-80a2-a8d3-e9a27371f9ac" class="numbered-list" start="1"><li><strong>Auth</strong><ul id="2933ddca-8541-8091-818b-dd51ee75c72b" class="bulleted-list"><li style="list-style-type:disc">OTP request throttling, expiry, wrong OTP handling, session persistence, logout.</li></ul></li></ol><ol type="1" id="2933ddca-8541-80c3-8b0c-c95edc673b90" class="numbered-list" start="2"><li><strong>Role Creation</strong><ul id="2933ddca-8541-8078-8f9f-e5bf3907520b" class="bulleted-list"><li style="list-style-type:disc">Consumer → Vendor join flow creates vendor row; roles array updated; status <code>pending</code>.</li></ul><ul id="2933ddca-8541-800c-ad77-f51eada41e55" class="bulleted-list"><li style="list-style-type:disc">Consumer → Rider join flow creates rider row similarly.</li></ul></li></ol><ol type="1" id="2933ddca-8541-80b5-b844-dee7146bc5bb" class="numbered-list" start="3"><li><strong>Role Gating</strong><ul id="2933ddca-8541-803c-805f-deae6c4ad632" class="bulleted-list"><li style="list-style-type:disc">Access to each dashboard and entity strictly matches active role.</li></ul><ul id="2933ddca-8541-8043-b93c-f490eef48a29" class="bulleted-list"><li style="list-style-type:disc">Cross-tenant read/write blocked by RLS (attempt direct API calls).</li></ul></li></ol><ol type="1" id="2933ddca-8541-80c9-8408-cac98a5b7ecd" class="numbered-list" start="4"><li><strong>Public Discovery</strong><ul id="2933ddca-8541-8019-994f-c123e19e4e0d" class="bulleted-list"><li style="list-style-type:disc">Only <code>vendors.status=&#x27;active&#x27;</code> + their meals/media are publicly readable.</li></ul></li></ol><ol type="1" id="2933ddca-8541-80b2-9545-f2be3743ad99" class="numbered-list" start="5"><li><strong>Admin Powers</strong><ul id="2933ddca-8541-80f2-a6ad-dfd29ddb6a2e" class="bulleted-list"><li style="list-style-type:disc">Admin can approve vendor (flip <code>kyc_status</code> + <code>status</code>), assign roles, and read docs.</li></ul></li></ol><ol type="1" id="2933ddca-8541-80bf-ad32-c0fe2400b338" class="numbered-list" start="6"><li><strong>Storage Separation</strong><ul id="2933ddca-8541-800d-a368-e52c4d58f5f5" class="bulleted-list"><li style="list-style-type:disc">Public vendor images accessible; private docs denied to non-admins/non-owners.</li></ul></li></ol><hr id="2933ddca-8541-80b2-9025-cde7f7cb56bf"/><h2 id="2933ddca-8541-80e9-9427-fc31b136abbc" class="">K) Naming, IDs, and Conventions</h2><ul id="2933ddca-8541-809b-908a-d7c19cf004c8" class="bulleted-list"><li style="list-style-type:disc"><strong>IDs:</strong> UUIDv4 for all tables.</li></ul><ul id="2933ddca-8541-803c-aa16-d286a7d83f4c" class="bulleted-list"><li style="list-style-type:disc"><strong>Columns:</strong> snake_case; booleans prefixed with is_/has_ only when needed.</li></ul><ul id="2933ddca-8541-8004-88a8-cca746d52816" class="bulleted-list"><li style="list-style-type:disc"><strong>Status columns:</strong> predictable enums; do not overload strings.</li></ul><ul id="2933ddca-8541-8086-be05-f9b7510a7941" class="bulleted-list"><li style="list-style-type:disc"><strong>Time:</strong> store UTC; convert at UI.</li></ul><ul id="2933ddca-8541-807b-ab2a-f0a9c191664e" class="bulleted-list"><li style="list-style-type:disc"><strong>Media paths:</strong> <code>vendor-media/{vendorId}/...</code>, <code>vendor-docs/{vendorId}/...</code>, etc.</li></ul><ul id="2933ddca-8541-807b-bad8-c97d10e18691" class="bulleted-list"><li style="list-style-type:disc"><strong>Zones:</strong> human-readable names; add polygons later.</li></ul><hr id="2933ddca-8541-8010-9f72-f9f2dccb7018"/><h2 id="2933ddca-8541-8086-ac5f-c1e4da7e1cc7" class="">L) Future-safe Extensions</h2><ul id="2933ddca-8541-802c-a616-cf52d4bcb975" class="bulleted-list"><li style="list-style-type:disc"><strong>Corporate/B2B</strong>: add <code>organizations</code>, <code>org_members</code>, and tie subscriptions to org accounts.</li></ul><ul id="2933ddca-8541-800c-84c9-ff21b64c5e56" class="bulleted-list"><li style="list-style-type:disc"><strong>Coupons/Credits</strong>: <code>wallets</code>, <code>wallet_ledger</code>, <code>promo_codes</code>.</li></ul><ul id="2933ddca-8541-8075-be33-c6a027aac2b9" class="bulleted-list"><li style="list-style-type:disc"><strong>Loyalty</strong>: <code>loyalty_points</code>, earn/redeem rules.</li></ul><ul id="2933ddca-8541-80cf-bef4-c6c8aa4f5677" class="bulleted-list"><li style="list-style-type:disc"><strong>Search</strong>: meal &amp; vendor search index for fast filtering.</li></ul><ul id="2933ddca-8541-8086-b343-efa560f1d14b" class="bulleted-list"><li style="list-style-type:disc"><strong>i18n</strong>: copy keys for Hindi/English toggles.</li></ul><hr id="2933ddca-8541-8090-b72c-dfc61c1127b4"/><h1 id="2933ddca-8541-8017-93ea-cc20e01fe807" class="">User Experience, Flows &amp; Dashboards</h1><h2 id="2933ddca-8541-80ae-ac72-e9bbbcba3368" class="">A) UX Principles &amp; Global Behaviors</h2><p id="2933ddca-8541-8031-8a79-edd55fe87082" class=""><strong>Design principles</strong></p><ul id="2933ddca-8541-8093-94ba-de5c3ef441f1" class="bulleted-list"><li style="list-style-type:disc"><strong>Role clarity:</strong> everything in the UI reflects the active role; cross-role actions live behind an explicit “Switch Role / Join Role” affordance.</li></ul><ul id="2933ddca-8541-804f-95ed-f94d5b35a4a3" class="bulleted-list"><li style="list-style-type:disc"><strong>Frictionless core flows:</strong> OTP sign-in, role routing, and primary CTAs are one-tap where possible.</li></ul><ul id="2933ddca-8541-8067-8482-cc95a6980ea8" class="bulleted-list"><li style="list-style-type:disc"><strong>Predictability:</strong> clear states (Empty → Draft → Pending → Active), explicit cutoffs, visible SLAs.</li></ul><ul id="2933ddca-8541-80d3-8ea6-d7c7e8047d26" class="bulleted-list"><li style="list-style-type:disc"><strong>Trust by default:</strong> FSSAI markers, hygiene checklists, verified badges, transparent pricing (later), human bios/photos.</li></ul><ul id="2933ddca-8541-805d-923b-e708370362dd" class="bulleted-list"><li style="list-style-type:disc"><strong>Mobile-first:</strong> all dashboards and forms must work on small screens; sidebar collapses; sticky primary CTA.</li></ul><p id="2933ddca-8541-8052-8de4-e5ef298e2305" class=""><strong>Global navigation</strong></p><ul id="2933ddca-8541-8081-bd4d-c49b3f0d2e35" class="bulleted-list"><li style="list-style-type:disc"><strong>Header:</strong> logo, active-role chip, profile/avatar menu (Account, Switch Role, Join Role, Logout).</li></ul><ul id="2933ddca-8541-8032-8f61-f60d2b975da4" class="bulleted-list"><li style="list-style-type:disc"><strong>Sidebar (role-aware):</strong> primary actions &amp; dashboards per role.</li></ul><ul id="2933ddca-8541-806b-9b9e-d20e24c14e22" class="bulleted-list"><li style="list-style-type:disc"><strong>Footers:</strong> links to Privacy, Terms, Help.</li></ul><p id="2933ddca-8541-8055-adc4-c804d74da754" class=""><strong>Global states</strong></p><ul id="2933ddca-8541-805b-ab8b-fbd6dee53779" class="bulleted-list"><li style="list-style-type:disc"><strong>Loading skeletons</strong> for lists/cards.</li></ul><ul id="2933ddca-8541-80da-a749-cbbe26e0767a" class="bulleted-list"><li style="list-style-type:disc"><strong>Empty states</strong> with the next action (e.g., “No subscriptions yet → Browse Chefs”).</li></ul><ul id="2933ddca-8541-80aa-8ed0-e1d4eccf80e1" class="bulleted-list"><li style="list-style-type:disc"><strong>Error toasts</strong> with retry.</li></ul><ul id="2933ddca-8541-8098-9097-dff14810a7e1" class="bulleted-list"><li style="list-style-type:disc"><strong>Access guard</strong> pages for cross-role deep links (offer “Join Role” if allowed).</li></ul><hr id="2933ddca-8541-80a0-aa28-d4acae043220"/><h2 id="2933ddca-8541-80a4-a334-ca78752e82a1" class="">B) Information Architecture &amp; Routes (role-aware)</h2><p id="2933ddca-8541-80bf-8870-c22394c9d86c" class=""><strong>Public:</strong> <code>/</code>, <code>/vendors</code>, <code>/vendor/[id]</code></p><p id="2933ddca-8541-802d-a3ac-de2c4b7370ba" class=""><strong>Auth:</strong> <code>/login</code>, <code>/vendor-login</code>, <code>/rider-login</code>, <code>/admin-login</code>, <code>/auth/signup</code>, <code>/auth/vendor-signup</code>, <code>/auth/rider-signup</code></p><p id="2933ddca-8541-80d2-a70e-e964d847d8ca" class=""><strong>Account:</strong> <code>/account</code> (profile, roles, addresses, role join actions)</p><p id="2933ddca-8541-80ad-95da-e2753433e4b3" class=""><strong>Dashboards:</strong> <code>/dashboard/consumer</code>, <code>/dashboard/vendor</code>, <code>/dashboard/rider</code>, <code>/dashboard/admin</code></p><p id="2933ddca-8541-80c4-bf3f-e79aeb847032" class=""><strong>Vendor workspace (progressively enabled):</strong></p><ul id="2933ddca-8541-80ad-aed7-cd73bb326a76" class="bulleted-list"><li style="list-style-type:disc"><code>/vendor/onboarding</code> (wizard)</li></ul><ul id="2933ddca-8541-8027-980f-df46061f59a9" class="bulleted-list"><li style="list-style-type:disc"><code>/vendor/profile</code> (bio, media)</li></ul><ul id="2933ddca-8541-80ae-83f9-c5dae8de8bb5" class="bulleted-list"><li style="list-style-type:disc"><code>/vendor/menu</code> (meals by slot)</li></ul><ul id="2933ddca-8541-80e5-b2bc-d8ac8f77e1c8" class="bulleted-list"><li style="list-style-type:disc"><code>/vendor/overview</code> (status)</li></ul><ul id="2933ddca-8541-8078-9c89-fa12c52ae4ab" class="bulleted-list"><li style="list-style-type:disc">Future: <code>/vendor/orders</code>, <code>/vendor/payouts</code>, <code>/vendor/reviews</code></li></ul><p id="2933ddca-8541-80a7-b14e-fab93b322592" class=""><strong>Admin workspace (progressively enabled):</strong></p><ul id="2933ddca-8541-8028-9de9-f58e6c026df8" class="bulleted-list"><li style="list-style-type:disc"><code>/admin/vendors</code>, <code>/admin/vendor/[id]</code></li></ul><ul id="2933ddca-8541-80ce-8dd5-f3dc9b9f0bd6" class="bulleted-list"><li style="list-style-type:disc"><code>/admin/users</code></li></ul><ul id="2933ddca-8541-8016-9714-c2712eb1ae08" class="bulleted-list"><li style="list-style-type:disc">Future: <code>/admin/ops</code>, <code>/admin/dispatch</code>, <code>/admin/payments</code>, <code>/admin/tickets</code>, <code>/admin/reports</code></li></ul><p id="2933ddca-8541-808a-8746-dd56e9af4687" class=""><strong>Rider workspace (progressively enabled):</strong></p><ul id="2933ddca-8541-80ab-8a17-def0813c6255" class="bulleted-list"><li style="list-style-type:disc"><code>/rider/overview</code></li></ul><ul id="2933ddca-8541-8014-a5f9-e874c6d998ce" class="bulleted-list"><li style="list-style-type:disc">Future: <code>/rider/routes</code>, <code>/rider/earnings</code></li></ul><p id="2933ddca-8541-8000-a8c3-eecf2cb8c637" class=""><strong>Consumer workspace (progressively enabled):</strong></p><ul id="2933ddca-8541-80c0-b766-da8200b891d4" class="bulleted-list"><li style="list-style-type:disc"><code>/consumer/subscriptions</code></li></ul><ul id="2933ddca-8541-806d-9bbc-d8441a7c00d6" class="bulleted-list"><li style="list-style-type:disc">Future: <code>/consumer/orders</code>, <code>/consumer/tickets</code></li></ul><hr id="2933ddca-8541-8080-8436-f8dc72e6f0f7"/><h2 id="2933ddca-8541-80d4-8f70-f22c32ff82c3" class="">C) User Flows — Detailed per Role</h2><h3 id="2933ddca-8541-8095-af3e-e8519035082e" class="">C1) Consumer Flow</h3><p id="2933ddca-8541-8030-9f69-f37ec052833b" class=""><strong>1) Sign-in / Role routing</strong></p><ul id="2933ddca-8541-8015-9018-cb16f082e513" class="bulleted-list"><li style="list-style-type:disc"><code>/login</code> → phone → OTP → resolve last-used or default role → <code>/dashboard/consumer</code>.</li></ul><ul id="2933ddca-8541-80d2-b62b-f4b4e435754e" class="bulleted-list"><li style="list-style-type:disc">If user only has vendor/rider, offer role switch or “Join as Consumer” (sets <code>consumer</code>).</li></ul><p id="2933ddca-8541-802c-83db-d234174a0408" class=""><strong>2) First-time setup</strong></p><ul id="2933ddca-8541-807e-a74b-cd94b2979d4f" class="bulleted-list"><li style="list-style-type:disc">Prompt for <strong>zone</strong> and <strong>default delivery address</strong> (PG/Hostel/Office).</li></ul><ul id="2933ddca-8541-8012-96ae-d53a8dc05623" class="bulleted-list"><li style="list-style-type:disc">Optional dietary prefs (veg/non-veg/mixed).</li></ul><p id="2933ddca-8541-8072-8728-fc141975f296" class=""><strong>3) Discovery (public → app)</strong></p><ul id="2933ddca-8541-80c2-b8d3-d63cd5648f45" class="bulleted-list"><li style="list-style-type:disc"><strong>Browse:</strong> <code>/vendors</code> list filtered by zone; tap to open <code>/vendor/[id]</code>.</li></ul><ul id="2933ddca-8541-804e-929a-c65518b5404a" class="bulleted-list"><li style="list-style-type:disc"><strong>Vendor page:</strong> hero (cover/profile, badges), story, gallery, <strong>menu by slot</strong>, ratings preview, <strong>CTAs</strong>: Start Trial / Subscribe (enabled in later phase).</li></ul><p id="2933ddca-8541-801f-9e5c-d8ffaa4fac52" class=""><strong>4) Subscription (later phase, define now)</strong></p><ul id="2933ddca-8541-80a4-8ab8-ffd2aa75ccbc" class="bulleted-list"><li style="list-style-type:disc"><strong>Plan wizard:</strong> select meals per day (B/L/D), select days/time windows, choose <strong>Trial / Weekly / Monthly</strong>, billing type (auto/prepaid).</li></ul><ul id="2933ddca-8541-8048-bb08-c299b4d89c89" class="bulleted-list"><li style="list-style-type:disc"><strong>Confirmation:</strong> show summary; payment (Razorpay later); <strong>subscription record</strong> created.</li></ul><p id="2933ddca-8541-8003-89dd-f1bdf46fd066" class=""><strong>5) Managing meals (later)</strong></p><ul id="2933ddca-8541-804e-a017-f884f4a6d5b2" class="bulleted-list"><li style="list-style-type:disc"><strong>Calendar view:</strong> skip day, swap lunch/dinner, change address for the day, edit preferences before cutoff.</li></ul><ul id="2933ddca-8541-8050-91ce-ce8bf11e7ddc" class="bulleted-list"><li style="list-style-type:disc"><strong>Delivery tracking:</strong> live ETA, rider contact; OTP confirm at doorstep.</li></ul><ul id="2933ddca-8541-80ed-93b8-d4ea9b22c253" class="bulleted-list"><li style="list-style-type:disc"><strong>Rate &amp; review</strong> after delivery; raise ticket (late/missing/quality).</li></ul><p id="2933ddca-8541-80b3-8ef9-cadf4719356c" class=""><strong>6) Account</strong></p><ul id="2933ddca-8541-80e3-acea-d997abbbefa3" class="bulleted-list"><li style="list-style-type:disc">Profile details, addresses, roles, <strong>Join as Vendor / Join as Rider</strong>, logout.</li></ul><p id="2933ddca-8541-8035-bf27-e954ecf0f253" class=""><strong>Consumer critical screens</strong></p><ul id="2933ddca-8541-8088-a732-fa5e82ac39c1" class="bulleted-list"><li style="list-style-type:disc"><code>/dashboard/consumer</code>: Welcome, “No subscriptions yet” CTA → <code>/vendors</code>.</li></ul><ul id="2933ddca-8541-80dc-aa2a-eab6763a08a1" class="bulleted-list"><li style="list-style-type:disc"><code>/vendors</code>: vendor grid; filters (veg-only, rating sort).</li></ul><ul id="2933ddca-8541-8035-8f2f-c17004455520" class="bulleted-list"><li style="list-style-type:disc"><code>/vendor/[id]</code>: hero, story, gallery, menu tabs, reviews, CTAs.</li></ul><ul id="2933ddca-8541-8024-8534-c42eacc54b2b" class="bulleted-list"><li style="list-style-type:disc"><code>/account</code>: profile, addresses, roles, join actions.</li></ul><p id="2933ddca-8541-80c5-aecd-d6cabb0cc8f1" class=""><strong>Consumer edge cases</strong></p><ul id="2933ddca-8541-8037-910f-ed2a9b5275a5" class="bulleted-list"><li style="list-style-type:disc">No vendors in zone → graceful empty state; suggest neighboring zone or waitlist.</li></ul><ul id="2933ddca-8541-8062-a988-f7d935ce91a6" class="bulleted-list"><li style="list-style-type:disc">Attempt to open vendor not <code>active</code> → 404 vendor page.</li></ul><ul id="2933ddca-8541-800d-8a35-e632b134213b" class="bulleted-list"><li style="list-style-type:disc">Multiple addresses → confirm active address when starting subscription.</li></ul><hr id="2933ddca-8541-806b-8994-c9f5576e0d62"/><h3 id="2933ddca-8541-80d8-84bc-ceecab3e2b1e" class="">C2) Vendor Flow</h3><p id="2933ddca-8541-809a-96be-ca8cf0e6371d" class=""><strong>1) Sign-in / Role routing</strong></p><ul id="2933ddca-8541-8010-bfc5-eaa1aae16822" class="bulleted-list"><li style="list-style-type:disc"><code>/vendor-login</code> → phone → OTP → <code>/dashboard/vendor</code>.</li></ul><ul id="2933ddca-8541-80ff-879c-d2cf10e05d34" class="bulleted-list"><li style="list-style-type:disc">If user lacks <code>vendor</code>, prompt <strong>Join as Vendor</strong> (creates vendor row with <code>status=pending</code>, <code>kyc_status=pending</code>).</li></ul><p id="2933ddca-8541-806c-b3fe-c9fa9b0a6a18" class=""><strong>2) Onboarding wizard</strong></p><ul id="2933ddca-8541-80c6-b06e-df13f2e24dd3" class="bulleted-list"><li style="list-style-type:disc">Steps: <strong>Basics</strong> (display_name, veg-only, zone) → <strong>KYC/FSSAI</strong> (doc uploads) → <strong>Kitchen address</strong> → <strong>Capacity per slot</strong> → <strong>Review &amp; Submit</strong>.</li></ul><ul id="2933ddca-8541-801a-a9da-d4d226d0a814" class="bulleted-list"><li style="list-style-type:disc">After submit: status <strong>Pending</strong> with banner. Admin can later approve → <code>active</code>.</li></ul><p id="2933ddca-8541-8024-9b09-c7fdb9fac4f4" class=""><strong>3) Profile &amp; media</strong></p><ul id="2933ddca-8541-8064-a044-dc12498f460a" class="bulleted-list"><li style="list-style-type:disc"><strong>Bio</strong> (story, tagline), <strong>Profile/Cover</strong> images, <strong>Intro video</strong> (short), <strong>Gallery</strong>.</li></ul><ul id="2933ddca-8541-80a1-a168-d840a1004c58" class="bulleted-list"><li style="list-style-type:disc">Preview public vendor page.</li></ul><p id="2933ddca-8541-80f6-a4cc-c317baef3536" class=""><strong>4) Menu management</strong></p><ul id="2933ddca-8541-80f7-a98a-d6907418a0a2" class="bulleted-list"><li style="list-style-type:disc">Tabbed by <strong>Breakfast / Lunch / Dinner</strong>.</li></ul><ul id="2933ddca-8541-80d4-9e97-d1c3f385e905" class="bulleted-list"><li style="list-style-type:disc">Add/edit meals: name, description, veg flag, items, image, <strong>active toggle</strong>.</li></ul><p id="2933ddca-8541-8059-ac29-e407fd58f735" class=""><strong>5) Daily operations (future pages)</strong></p><ul id="2933ddca-8541-808c-84f6-d48bc297c75b" class="bulleted-list"><li style="list-style-type:disc"><strong>Today’s prep board:</strong> counts per meal/slot; mark <strong>Ready</strong>; notes (Jain/no-onion).</li></ul><ul id="2933ddca-8541-80eb-b7ea-c99c49b2bb1c" class="bulleted-list"><li style="list-style-type:disc"><strong>Order handoff</strong>: rider ETA, pickup confirmation.</li></ul><p id="2933ddca-8541-80ad-9085-f5d367abbbbf" class=""><strong>6) Payouts &amp; ratings (future pages)</strong></p><ul id="2933ddca-8541-8080-905b-c1af25e3a0ba" class="bulleted-list"><li style="list-style-type:disc">Weekly payouts summary, settlement logs.</li></ul><ul id="2933ddca-8541-8092-bbb8-d0617f033ea5" class="bulleted-list"><li style="list-style-type:disc">Ratings feed; complaint breakdown.</li></ul><p id="2933ddca-8541-80ea-9122-f4af3d407ed6" class=""><strong>Vendor critical screens</strong></p><ul id="2933ddca-8541-806d-8593-d652bc247000" class="bulleted-list"><li style="list-style-type:disc"><code>/dashboard/vendor</code>: status cards (KYC/Status), onboarding checklist, quick links.</li></ul><ul id="2933ddca-8541-805c-9110-ed8f3f026b8f" class="bulleted-list"><li style="list-style-type:disc"><code>/vendor/onboarding</code>: stepper with save-as-draft.</li></ul><ul id="2933ddca-8541-80da-b930-c0ede6677597" class="bulleted-list"><li style="list-style-type:disc"><code>/vendor/profile</code>: bio + media.</li></ul><ul id="2933ddca-8541-8079-8157-d51f8f1d6bed" class="bulleted-list"><li style="list-style-type:disc"><code>/vendor/menu</code>: CRUD per slot.</li></ul><ul id="2933ddca-8541-80e1-ade9-d4622e1a3d60" class="bulleted-list"><li style="list-style-type:disc"><code>/vendor/overview</code>: readiness, capacity, banner states.</li></ul><p id="2933ddca-8541-8028-9bce-e32f9e377141" class=""><strong>Vendor edge cases</strong></p><ul id="2933ddca-8541-807a-b2c3-c7bb1f2fa3d8" class="bulleted-list"><li style="list-style-type:disc">KYC rejected → explain reason, allow resubmission.</li></ul><ul id="2933ddca-8541-8042-97f7-f0168fba617b" class="bulleted-list"><li style="list-style-type:disc">Capacity zero for all slots → warn that profile won’t be shown in discovery after approval.</li></ul><ul id="2933ddca-8541-809d-8756-cc5ca5f0ea33" class="bulleted-list"><li style="list-style-type:disc">Media too large → enforce constraints with friendly errors.</li></ul><hr id="2933ddca-8541-80a9-9ca8-d5398540971c"/><h3 id="2933ddca-8541-80ee-ad0a-e899337a3ff5" class="">C3) Rider Flow</h3><p id="2933ddca-8541-8067-83cc-c74d9da60964" class=""><strong>1) Sign-in / Role routing</strong></p><ul id="2933ddca-8541-80ea-a008-ce45c4df4d96" class="bulleted-list"><li style="list-style-type:disc"><code>/rider-login</code> → phone → OTP → <code>/dashboard/rider</code>.</li></ul><ul id="2933ddca-8541-8039-bed9-c58c348620a9" class="bulleted-list"><li style="list-style-type:disc">If user lacks <code>rider</code>, prompt <strong>Join as Rider</strong> (create rider row with <code>status=off/pending</code>).</li></ul><p id="2933ddca-8541-80a3-bc6d-f9aff34a572d" class=""><strong>2) Profile setup (future)</strong></p><ul id="2933ddca-8541-8046-b088-da4c9c66803f" class="bulleted-list"><li style="list-style-type:disc">Vehicle type, documents (DL/Aadhaar), zone.</li></ul><p id="2933ddca-8541-80c9-9f5d-eed0683a319e" class=""><strong>3) Shift &amp; routes (future)</strong></p><ul id="2933ddca-8541-8045-abf2-ea5f4d0bafcc" class="bulleted-list"><li style="list-style-type:disc"><strong>Start Shift</strong> → show assigned route(s) per slot.</li></ul><ul id="2933ddca-8541-8096-8c5f-c603205b89aa" class="bulleted-list"><li style="list-style-type:disc"><strong>Pickup flow:</strong> vendor list, confirm pickup (scan vendor QR or confirm counts).</li></ul><ul id="2933ddca-8541-80c1-90a3-cb8ea6d895ad" class="bulleted-list"><li style="list-style-type:disc"><strong>Delivery flow:</strong> stop list, <strong>OTP/QR</strong> confirm at door; capture photo for exceptions; call recipient inline.</li></ul><ul id="2933ddca-8541-8049-93ed-d34da2604398" class="bulleted-list"><li style="list-style-type:disc"><strong>Exceptions:</strong> No-answer, address issue, spill/damage.</li></ul><p id="2933ddca-8541-8092-b908-ed450ba5e258" class=""><strong>4) Earnings (future)</strong></p><ul id="2933ddca-8541-8076-ae47-df523098a28d" class="bulleted-list"><li style="list-style-type:disc">Today’s payout estimate, week summary, incentive badges.</li></ul><p id="2933ddca-8541-80cc-8681-dc32ab7b1964" class=""><strong>Rider critical screens</strong></p><ul id="2933ddca-8541-800e-bb44-c84917da0203" class="bulleted-list"><li style="list-style-type:disc"><code>/dashboard/rider</code>: Welcome, “No assigned routes” empty state, “Start Shift” CTA (stub).</li></ul><ul id="2933ddca-8541-8049-9b51-cb50c9d78a0d" class="bulleted-list"><li style="list-style-type:disc">Future: <code>/rider/routes</code>, route detail; <code>/rider/earnings</code>.</li></ul><p id="2933ddca-8541-8073-a5e2-f71f82122e6e" class=""><strong>Rider edge cases</strong></p><ul id="2933ddca-8541-8072-81b3-f0335199f78d" class="bulleted-list"><li style="list-style-type:disc">Route reassignment mid-run → show resequenced stops.</li></ul><ul id="2933ddca-8541-80dd-bcd8-caa78f0275b9" class="bulleted-list"><li style="list-style-type:disc">Poor connectivity → queue offline events for later sync.</li></ul><hr id="2933ddca-8541-80b3-a507-f9ac31b820e2"/><h3 id="2933ddca-8541-80d0-a7dc-db45d85c75fb" class="">C4) Admin Flow</h3><p id="2933ddca-8541-8067-93b1-dce688580253" class=""><strong>1) Sign-in / Role routing</strong></p><ul id="2933ddca-8541-8007-abd8-e2b682c96c38" class="bulleted-list"><li style="list-style-type:disc"><code>/admin-login</code> → phone → OTP → <code>/dashboard/admin</code>.</li></ul><ul id="2933ddca-8541-80d1-bc26-e5ce2018ba27" class="bulleted-list"><li style="list-style-type:disc">If user lacks <code>admin</code>, deny and suggest default <code>/login</code>.</li></ul><p id="2933ddca-8541-8047-bb3b-cf6dfceb0159" class=""><strong>2) Core admin actions (MVP)</strong></p><ul id="2933ddca-8541-80ca-9d8c-f340fec3d143" class="bulleted-list"><li style="list-style-type:disc"><strong>Users &amp; roles:</strong> <code>/admin/users</code> list; search by phone; assign/remove roles; <strong>never remove last admin</strong>.</li></ul><ul id="2933ddca-8541-80c7-b412-e84249d0859c" class="bulleted-list"><li style="list-style-type:disc"><strong>Vendors:</strong> <code>/admin/vendors</code> with filters (zone/status/kyc); open <code>/admin/vendor/[id]</code> to review profile, media, docs; actions: <strong>Approve</strong> (set <code>kyc_status=approved</code>, <code>status=active</code>), <strong>Reject</strong>, <strong>Suspend</strong>, <strong>Unavailable</strong>.</li></ul><p id="2933ddca-8541-8054-9959-ede35aa6341b" class=""><strong>3) Ops &amp; growth (future)</strong></p><ul id="2933ddca-8541-80db-acde-cf08f1ba5be7" class="bulleted-list"><li style="list-style-type:disc"><strong>Ops cockpit:</strong> live orders by zone/slot; exceptions queue.</li></ul><ul id="2933ddca-8541-808c-aac9-daf62d3a3f5b" class="bulleted-list"><li style="list-style-type:disc"><strong>Dispatch:</strong> auto-generate routes; assign riders; export to 3PL.</li></ul><ul id="2933ddca-8541-809e-a5ed-fdef0aa90f5c" class="bulleted-list"><li style="list-style-type:disc"><strong>Payments:</strong> consumer recon; vendor/rider payouts.</li></ul><ul id="2933ddca-8541-80f6-97bd-f8d8f3089f95" class="bulleted-list"><li style="list-style-type:disc"><strong>Tickets:</strong> SLA-based support workflows.</li></ul><ul id="2933ddca-8541-80e6-9ce7-e8c832ddf6f0" class="bulleted-list"><li style="list-style-type:disc"><strong>Reports:</strong> revenue, on-time %, complaint rates, churn, retention.</li></ul><p id="2933ddca-8541-803e-93d9-d10b22531c78" class=""><strong>Admin critical screens</strong></p><ul id="2933ddca-8541-8054-9ec0-e350b8b9897f" class="bulleted-list"><li style="list-style-type:disc"><code>/dashboard/admin</code>: KPI tiles, shortcuts.</li></ul><ul id="2933ddca-8541-800e-afcf-e349e9c66c41" class="bulleted-list"><li style="list-style-type:disc"><code>/admin/users</code>: role management with confirmations, audit log.</li></ul><ul id="2933ddca-8541-80e7-aa04-cc310b0797b2" class="bulleted-list"><li style="list-style-type:disc"><code>/admin/vendors</code> + <code>/admin/vendor/[id]</code>: approvals &amp; moderation.</li></ul><p id="2933ddca-8541-80bd-bca3-db3a9ba0d669" class=""><strong>Admin edge cases</strong></p><ul id="2933ddca-8541-80b7-9449-d071ba8d5c10" class="bulleted-list"><li style="list-style-type:disc">Approving a vendor with zero meals or missing media → warn but allow with override.</li></ul><ul id="2933ddca-8541-8008-8191-d300c6460497" class="bulleted-list"><li style="list-style-type:disc">Role conflicts (multi-role users) → log actions to <code>audit_log</code> with actor id.</li></ul><hr id="2933ddca-8541-8028-b275-fc6203fd186c"/><h2 id="2933ddca-8541-80c9-adf9-eb5bbf68eabf" class="">D) Dashboards — MVP vs Full</h2><h3 id="2933ddca-8541-807c-87b8-c2a9af8b5e1f" class="">D1) Consumer Dashboard</h3><p id="2933ddca-8541-8060-9dbe-ed71305b0d72" class=""><strong>MVP</strong></p><ul id="2933ddca-8541-8099-8822-d18b21f923fd" class="bulleted-list"><li style="list-style-type:disc">Welcome card (name, zone).</li></ul><ul id="2933ddca-8541-80cf-a908-e10cd7048038" class="bulleted-list"><li style="list-style-type:disc">“No subscriptions yet” tile with CTA to <strong>Browse Chefs</strong>.</li></ul><ul id="2933ddca-8541-806e-9bf4-f584d2d48840" class="bulleted-list"><li style="list-style-type:disc">Support card with help email/WA link.</li></ul><p id="2933ddca-8541-8016-83d4-f99db03a9a50" class=""><strong>Full</strong></p><ul id="2933ddca-8541-8095-b0d4-ed5b5eaef5f8" class="bulleted-list"><li style="list-style-type:disc">Active subscription summary (vendor, plan, next delivery).</li></ul><ul id="2933ddca-8541-803a-888f-ef099c90e234" class="bulleted-list"><li style="list-style-type:disc">Weekly calendar with skip/swap shortcuts.</li></ul><ul id="2933ddca-8541-80b9-8bcf-f0b9ac80987b" class="bulleted-list"><li style="list-style-type:disc">Credits wallet; recent deliveries &amp; ratings.</li></ul><p id="2933ddca-8541-80dd-8f29-f1244d96130a" class=""><strong>Key data</strong></p><ul id="2933ddca-8541-80bb-9c5b-cba816d43c92" class="bulleted-list"><li style="list-style-type:disc">Profile, default address, zone; subscriptions (later); vendor rating snapshots.</li></ul><hr id="2933ddca-8541-8065-9f61-d6322659e7a4"/><h3 id="2933ddca-8541-80dc-825e-d7f0a618d83d" class="">D2) Vendor Dashboard</h3><p id="2933ddca-8541-805f-b6fa-c58f5ae1c1bf" class=""><strong>MVP</strong></p><ul id="2933ddca-8541-8028-b6ee-cac3b8285eb1" class="bulleted-list"><li style="list-style-type:disc">Status banner: <strong>KYC Pending / Rejected / Approved</strong>; <strong>Profile Active / Unavailable / Suspended</strong>.</li></ul><ul id="2933ddca-8541-80e9-9528-ce579a9aa495" class="bulleted-list"><li style="list-style-type:disc">Checklist: <strong>Onboarding</strong> (steps), <strong>Add ≥3 meals/slot</strong>, <strong>Upload intro video</strong> (optional).</li></ul><ul id="2933ddca-8541-808f-a16d-ea4989b690ed" class="bulleted-list"><li style="list-style-type:disc">Quick links: Profile, Menu, Onboarding Review.</li></ul><p id="2933ddca-8541-8035-8835-ffc58d914eeb" class=""><strong>Full</strong></p><ul id="2933ddca-8541-8064-90cf-f027ac14560d" class="bulleted-list"><li style="list-style-type:disc">Today’s prep counts per slot, rider ETA, mark Ready.</li></ul><ul id="2933ddca-8541-80c1-b099-d6c2a6b086fb" class="bulleted-list"><li style="list-style-type:disc">Orders summary (delivered, failed, at-risk).</li></ul><ul id="2933ddca-8541-8077-80b8-f1c5235f5bc7" class="bulleted-list"><li style="list-style-type:disc">Payout estimate; rating trend.</li></ul><p id="2933ddca-8541-8002-81f9-e9db1eeb6691" class=""><strong>Key data</strong></p><ul id="2933ddca-8541-80ec-a6bf-db10e4727486" class="bulleted-list"><li style="list-style-type:disc">Vendor.status, kyc_status, capacity readiness, media count, meals per slot.</li></ul><hr id="2933ddca-8541-803c-83ee-d0d3044796a0"/><h3 id="2933ddca-8541-8037-aa1d-eb3121b089ab" class="">D3) Rider Dashboard</h3><p id="2933ddca-8541-8080-89f4-d73e0fedba4f" class=""><strong>MVP</strong></p><ul id="2933ddca-8541-80a9-8140-cc86670669e3" class="bulleted-list"><li style="list-style-type:disc">Welcome card (zone).</li></ul><ul id="2933ddca-8541-8015-a654-f617885ff40a" class="bulleted-list"><li style="list-style-type:disc">“No assigned routes” placeholder.</li></ul><ul id="2933ddca-8541-80c1-af23-ea155c2c4858" class="bulleted-list"><li style="list-style-type:disc">Profile completeness gauge (vehicle set? docs uploaded?).</li></ul><p id="2933ddca-8541-80e6-9e18-fc5313cfa80b" class=""><strong>Full</strong></p><ul id="2933ddca-8541-80f6-a391-c8413640b116" class="bulleted-list"><li style="list-style-type:disc">Active route card (stops total, ETA, payout).</li></ul><ul id="2933ddca-8541-8028-b4c8-cd1697db2f40" class="bulleted-list"><li style="list-style-type:disc">Exceptions queue; reattempts; on-time % and distance.</li></ul><p id="2933ddca-8541-80c8-9e4d-fe6c12c9c020" class=""><strong>Key data</strong></p><ul id="2933ddca-8541-80e6-821e-c925a997a7f4" class="bulleted-list"><li style="list-style-type:disc">Rider.status, zone; route summary (later).</li></ul><hr id="2933ddca-8541-807a-be73-e3ece7a8d5b5"/><h3 id="2933ddca-8541-8047-9581-e5a3575c63df" class="">D4) Admin Dashboard</h3><p id="2933ddca-8541-807a-81b9-e9d0dd5d1363" class=""><strong>MVP</strong></p><ul id="2933ddca-8541-8040-8b94-cc3ab92f06e4" class="bulleted-list"><li style="list-style-type:disc">Tiles: total users, vendors (active/pending), riders (active), zones active.</li></ul><ul id="2933ddca-8541-80f3-866c-fd23bd58d849" class="bulleted-list"><li style="list-style-type:disc">Shortcuts: <strong>Manage Users</strong>, <strong>Approve Vendors</strong>, <strong>Create Zone</strong>.</li></ul><p id="2933ddca-8541-80fe-9828-d161de525a87" class=""><strong>Full</strong></p><ul id="2933ddca-8541-8004-b567-e95be7300bcb" class="bulleted-list"><li style="list-style-type:disc">Live ops widgets (orders by status, at-risk count).</li></ul><ul id="2933ddca-8541-8068-bcca-d8a1a9645170" class="bulleted-list"><li style="list-style-type:disc">Financial pulse (revenue, payouts).</li></ul><ul id="2933ddca-8541-8096-a261-e312740358da" class="bulleted-list"><li style="list-style-type:disc">Complaints SLA tracker; cohort retention chart.</li></ul><p id="2933ddca-8541-80ba-a6f2-c9908751792e" class=""><strong>Key data</strong></p><ul id="2933ddca-8541-8088-8642-ce0612224369" class="bulleted-list"><li style="list-style-type:disc">Counts aggregated from profiles/vendors/riders/zones.</li></ul><hr id="2933ddca-8541-806b-bf6f-f6a1e2945ab9"/><h2 id="2933ddca-8541-80eb-a2b9-e53694cd91ec" class="">E) Screen Specs — What each must include</h2><p id="2933ddca-8541-80a6-aefd-e2b59145c459" class=""><strong>Vendor Card (in </strong><code><strong>/vendors</strong></code><strong>)</strong></p><ul id="2933ddca-8541-80d2-bdf5-d9edca98aaa7" class="bulleted-list"><li style="list-style-type:disc">Cover image (responsive), Avatar (profile), Name, Zone tag, ⭐ rating (avg + count), Badges: FSSAI, Veg-only.</li></ul><ul id="2933ddca-8541-8025-a67c-f5de4e1d0c00" class="bulleted-list"><li style="list-style-type:disc">Tap → <code>/vendor/[id]</code>.</li></ul><p id="2933ddca-8541-80d4-9107-fdc7c425e2e5" class=""><strong>Vendor Page (</strong><code><strong>/vendor/[id]</strong></code><strong>)</strong></p><ul id="2933ddca-8541-80a1-bd22-f3b2d5d04b8c" class="bulleted-list"><li style="list-style-type:disc">Hero: cover, avatar, name, zone, badges, rating.</li></ul><ul id="2933ddca-8541-8054-aa01-c01f441559ef" class="bulleted-list"><li style="list-style-type:disc">Story block; intro video (if any).</li></ul><ul id="2933ddca-8541-809f-88cd-f13a63fe67f2" class="bulleted-list"><li style="list-style-type:disc">Gallery grid (lightbox).</li></ul><ul id="2933ddca-8541-8072-b5a9-efcab67913e8" class="bulleted-list"><li style="list-style-type:disc">Tabs: Breakfast/Lunch/Dinner → meal cards (name, veg icon, image, short desc).</li></ul><ul id="2933ddca-8541-80c6-ab1d-f45d6ffc2a0b" class="bulleted-list"><li style="list-style-type:disc">Reviews preview (top 3); link to “See all reviews” (future).</li></ul><ul id="2933ddca-8541-80fd-95c8-db36cb05fa4f" class="bulleted-list"><li style="list-style-type:disc">CTAs: <strong>Start Trial</strong> / <strong>Subscribe</strong> (enable later).</li></ul><p id="2933ddca-8541-80d7-beda-f02039d94031" class=""><strong>Onboarding Stepper (</strong><code><strong>/vendor/onboarding</strong></code><strong>)</strong></p><ul id="2933ddca-8541-8018-818b-cb2481caa93d" class="bulleted-list"><li style="list-style-type:disc">Progress indicator; Save as draft.</li></ul><ul id="2933ddca-8541-80df-b31d-c2d06e4cd602" class="bulleted-list"><li style="list-style-type:disc">Validation at each step; clear error copy.</li></ul><ul id="2933ddca-8541-807d-8750-f4dc39a00140" class="bulleted-list"><li style="list-style-type:disc">Final review screen with summary; Submit → Pending banner.</li></ul><p id="2933ddca-8541-80bc-9893-ceb8502789c3" class=""><strong>Admin Vendor Detail (</strong><code><strong>/admin/vendor/[id]</strong></code><strong>)</strong></p><ul id="2933ddca-8541-8097-a297-d893396986df" class="bulleted-list"><li style="list-style-type:disc">Panels: Basics (display name, zone, veg-only, FSSAI), Media previews, Docs (private), Meals summary.</li></ul><ul id="2933ddca-8541-8036-a467-c290baa1261b" class="bulleted-list"><li style="list-style-type:disc">Action buttons: Approve, Reject (reason), Suspend/Unsuspend, Set Unavailable/Active.</li></ul><ul id="2933ddca-8541-8008-947f-efc093de02db" class="bulleted-list"><li style="list-style-type:disc">Status history (last action, actor, timestamp).</li></ul><p id="2933ddca-8541-800f-ab68-fff43c350dea" class=""><strong>Account (</strong><code><strong>/account</strong></code><strong>)</strong></p><ul id="2933ddca-8541-8088-83cb-f09c6c1479b8" class="bulleted-list"><li style="list-style-type:disc">Profile edit, role badges, <strong>Switch Role</strong> control.</li></ul><ul id="2933ddca-8541-8047-86e7-d05368cebbef" class="bulleted-list"><li style="list-style-type:disc"><strong>Join as Vendor</strong>, <strong>Join as Rider</strong> buttons.</li></ul><ul id="2933ddca-8541-8019-a2dd-eb97650b0fe1" class="bulleted-list"><li style="list-style-type:disc">Address book (label, line1, set default).</li></ul><ul id="2933ddca-8541-8070-8cb1-d797241ca174" class="bulleted-list"><li style="list-style-type:disc">Logout.</li></ul><hr id="2933ddca-8541-80b7-a1f3-e9e5d5ed6093"/><h2 id="2933ddca-8541-80da-9307-e17020d52282" class="">F) State Machines (high level)</h2><p id="2933ddca-8541-8076-b5d0-e2dcb71c44e2" class=""><strong>Vendor.status:</strong> <code>pending → active ↔ unavailable → suspended</code></p><p id="2933ddca-8541-8040-864c-c7237cdda896" class=""><strong>Vendor.kyc_status:</strong> <code>pending → approved | rejected</code></p><p id="2933ddca-8541-802e-a842-c86b61e2b545" class=""><strong>Rider.status:</strong> <code>off/pending → active ↔ off → suspended</code></p><p id="2933ddca-8541-803e-9862-cf70fa50e2ec" class=""><strong>Subscription.status (future):</strong> <code>trial → active ↔ paused → cancelled</code></p><p id="2933ddca-8541-801d-9073-cf0a76e4bff7" class=""><strong>Order.status (future):</strong> <code>scheduled → preparing → ready → picked → delivered | failed(:reason)</code></p><p id="2933ddca-8541-8009-9558-c26b941bcb15" class=""><strong>Ticket.status (future):</strong> <code>open → actioned → closed</code></p><hr id="2933ddca-8541-80e3-9d35-ff00d39ba895"/><h2 id="2933ddca-8541-80fe-b6ce-e92d273194a8" class="">G) Acceptance Criteria (UX &amp; Flows)</h2><ul id="2933ddca-8541-8023-8742-f8726a18bf45" class="bulleted-list"><li style="list-style-type:disc"><strong>Role routing</strong> always lands users on the correct dashboard; cross-role deep links show a guard with options.</li></ul><ul id="2933ddca-8541-8007-83fb-e6fcc1ee44d0" class="bulleted-list"><li style="list-style-type:disc"><strong>Auth UX</strong>: clear OTP flows, resend timers, error states, and success feedback.</li></ul><ul id="2933ddca-8541-8011-be76-f68c741e234b" class="bulleted-list"><li style="list-style-type:disc"><strong>MVP dashboards</strong> show role-relevant content and real role guards (non-owners denied).</li></ul><ul id="2933ddca-8541-80ad-a955-cfa6bfe72436" class="bulleted-list"><li style="list-style-type:disc"><strong>Public pages</strong> only surface <code>active</code> vendors and their public media/meals; inactive vendors never leak.</li></ul><ul id="2933ddca-8541-807e-9e24-cb5570cabb92" class="bulleted-list"><li style="list-style-type:disc"><strong>Onboarding UX</strong> (when enabled): can complete, submit, and see Pending with clear guidance.</li></ul><ul id="2933ddca-8541-8040-a81d-f71ffa27d540" class="bulleted-list"><li style="list-style-type:disc"><strong>Accessibility</strong>: labeled inputs, keyboard tab order, focus states, semantic headings.</li></ul><ul id="2933ddca-8541-8071-85e7-e76447f179fa" class="bulleted-list"><li style="list-style-type:disc"><strong>Performance</strong>: responsive images, lazy-loaded galleries, inline poster for videos.</li></ul><hr id="2933ddca-8541-80fd-b023-f727f4feb588"/><h2 id="2933ddca-8541-8032-bda1-d5554975366e" class="">H) KPIs by Role (experience-focused)</h2><ul id="2933ddca-8541-8024-aa02-df6c4db97011" class="bulleted-list"><li style="list-style-type:disc"><strong>Consumer:</strong> trial→paid conversion, weekly retention, support tickets per 100 orders (later).</li></ul><ul id="2933ddca-8541-802c-8827-f9defafe958f" class="bulleted-list"><li style="list-style-type:disc"><strong>Vendor:</strong> time-to-approval, meals/slot completeness, average rating, complaint rate.</li></ul><ul id="2933ddca-8541-80a4-848a-d96b401de75f" class="bulleted-list"><li style="list-style-type:disc"><strong>Rider:</strong> first-attempt success %, on-time %, exceptions per 100 stops (later).</li></ul><ul id="2933ddca-8541-80b0-87fc-c272b10d842e" class="bulleted-list"><li style="list-style-type:disc"><strong>Admin:</strong> median approval time, % vendors with complete profiles, role-change errors, RLS incident count (0 target).</li></ul><hr id="2933ddca-8541-80eb-8d96-ffa26df0b5b9"/><h2 id="2933ddca-8541-806b-9b92-daf063ac20ff" class="">I) Copy &amp; Content Guidelines</h2><ul id="2933ddca-8541-80c8-95c8-f822b6c54ede" class="bulleted-list"><li style="list-style-type:disc"><strong>Tone:</strong> warm, trustworthy, simple Hinglish/English mix where appropriate.</li></ul><ul id="2933ddca-8541-804a-b417-cf65735e69a0" class="bulleted-list"><li style="list-style-type:disc"><strong>Microcopy examples:</strong><ul id="2933ddca-8541-8026-91eb-de08b3b67fbf" class="bulleted-list"><li style="list-style-type:circle">OTP screen: “Enter the 6-digit code we sent to your phone. Didn’t get it? Resend in 00:30.”</li></ul><ul id="2933ddca-8541-80da-bc98-f641bc2608c4" class="bulleted-list"><li style="list-style-type:circle">Vendor pending: “Thanks! Your kitchen is under review. We’ll notify you when you’re live.”</li></ul><ul id="2933ddca-8541-80e5-90b6-d081a8b6bf0b" class="bulleted-list"><li style="list-style-type:circle">Empty consumer subs: “No subscriptions yet. Find a home chef you’ll love.”</li></ul></li></ul><hr id="2933ddca-8541-80d6-8227-c41b3858b0d2"/><h2 id="2933ddca-8541-8005-9293-ca76af8710db" class="">J) Future Enhancements (hook points in the UI)</h2><ul id="2933ddca-8541-8073-8124-f7de556a1048" class="bulleted-list"><li style="list-style-type:disc"><strong>Role Switcher</strong> persists per device; add quick switch in header.</li></ul><ul id="2933ddca-8541-80f9-8531-ffef3e554620" class="bulleted-list"><li style="list-style-type:disc"><strong>In-app notifications</strong> (banner/toast) for approvals, payouts, route changes.</li></ul><ul id="2933ddca-8541-800a-aba1-f75fb48a898e" class="bulleted-list"><li style="list-style-type:disc"><strong>Localization</strong> scaffold (English/Hinglish copy keys).</li></ul><ul id="2933ddca-8541-8036-91e8-df0beb6b17c7" class="bulleted-list"><li style="list-style-type:disc"><strong>Loyalty/credits</strong> blocks on consumer dashboard.</li></ul><hr id="2933ddca-8541-80a9-b1f1-d91862f4ea0d"/><h1 id="2933ddca-8541-8079-8828-ca1239e59e1f" class="">Operations, Integrations &amp; Roadmap</h1><hr id="2933ddca-8541-8059-8cf5-f5b838aad612"/><h2 id="2933ddca-8541-80fb-af27-f6ebbf3f9b59" class="">A) Platform Operations Overview</h2><p id="2933ddca-8541-80da-b23d-c0c95cb1873f" class="">Tummy Tales runs as a <strong>multi-sided operational system</strong>:</p><ul id="2933ddca-8541-80d0-a3f7-f04c589e691d" class="bulleted-list"><li style="list-style-type:disc"><strong>Consumers</strong> subscribe and pay online.</li></ul><ul id="2933ddca-8541-8024-90f8-c23b6fa5a29e" class="bulleted-list"><li style="list-style-type:disc"><strong>Vendors (home chefs)</strong> prepare scheduled meals.</li></ul><ul id="2933ddca-8541-8071-98ff-f048f37fcae1" class="bulleted-list"><li style="list-style-type:disc"><strong>Riders</strong> pick up and deliver meals in clusters.</li></ul><ul id="2933ddca-8541-80e9-ba5c-eeb58c202ecb" class="bulleted-list"><li style="list-style-type:disc"><strong>Admins</strong> orchestrate approvals, logistics, and payouts.</li></ul><p id="2933ddca-8541-800f-82e3-c258781872a8" class="">The operational backbone consists of four continuous cycles:</p><table id="2933ddca-8541-8014-a070-eb0f3672d8d1" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-8033-9d14-d4e221d161be"><th id="apO}" class="simple-table-header-color simple-table-header">Cycle</th><th id="vBmc" class="simple-table-header-color simple-table-header">Description</th><th id="_KEE" class="simple-table-header-color simple-table-header">Owner</th></tr></thead><tbody><tr id="2933ddca-8541-80b2-a115-e29a3e730926"><td id="apO}" class=""><strong>1 — Supply Onboarding</strong></td><td id="vBmc" class="">Vendor/Rider KYC, verification, and activation</td><td id="_KEE" class="">Admin</td></tr><tr id="2933ddca-8541-805f-986b-e2290a656f9f"><td id="apO}" class=""><strong>2 — Order Generation</strong></td><td id="vBmc" class="">Expand active subscriptions → daily orders (per slot)</td><td id="_KEE" class="">System job</td></tr><tr id="2933ddca-8541-808a-93de-f7e11ed61f92"><td id="apO}" class=""><strong>3 — Delivery Execution</strong></td><td id="vBmc" class="">Assign riders, track delivery, confirm via OTP</td><td id="_KEE" class="">Rider + Admin</td></tr><tr id="2933ddca-8541-80d1-895f-fe28f4e097e0"><td id="apO}" class=""><strong>4 — Financial Settlement</strong></td><td id="vBmc" class="">Collect consumer payments, release vendor/rider payouts</td><td id="_KEE" class="">Admin + System job</td></tr></tbody></table><p id="2933ddca-8541-80c4-b72f-e3648b88a588" class="">Each cycle must be modular, logged, and recoverable (idempotent jobs, auditable actions).</p><hr id="2933ddca-8541-8086-b033-c8da14960693"/><h2 id="2933ddca-8541-8046-abb7-eaa4d8b6bfbb" class="">B) Third-Party Integrations (End-to-End Map)</h2><table id="2933ddca-8541-8028-bb7b-cb1cc611ec50" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-8033-8c7e-f1173eccdbb9"><th id="S=eP" class="simple-table-header-color simple-table-header">Integration</th><th id="wKKs" class="simple-table-header-color simple-table-header">Purpose</th><th id="CoE=" class="simple-table-header-color simple-table-header">Phase</th><th id="HtSO" class="simple-table-header-color simple-table-header">Key Use</th></tr></thead><tbody><tr id="2933ddca-8541-807d-b932-c7578d3bf6ba"><td id="S=eP" class=""><strong>Supabase Auth + Twilio SMS</strong></td><td id="wKKs" class="">Phone OTP login &amp; session mgmt</td><td id="CoE=" class="">Phase 0</td><td id="HtSO" class=""><code>+91</code> OTP via Twilio; verify; persist session</td></tr><tr id="2933ddca-8541-800e-9050-d1fd78271817"><td id="S=eP" class=""><strong>Supabase Storage</strong></td><td id="wKKs" class="">Host images, videos, KYC docs</td><td id="CoE=" class="">Phase 0+</td><td id="HtSO" class="">Public bucket for vendor media; private for docs</td></tr><tr id="2933ddca-8541-80e1-b11a-c3f52eb2c29f"><td id="S=eP" class=""><strong>Razorpay</strong></td><td id="wKKs" class="">Payments &amp; subscriptions</td><td id="CoE=" class="">Phase 2</td><td id="HtSO" class="">Collect consumer fees; record transactions</td></tr><tr id="2933ddca-8541-80be-b444-fd3dfdbce394"><td id="S=eP" class=""><strong>Google Maps API</strong></td><td id="wKKs" class="">Address autofill &amp; zone detection</td><td id="CoE=" class="">Phase 1</td><td id="HtSO" class="">Geocode user/vendor addresses; distance calc</td></tr><tr id="2933ddca-8541-800e-bc02-d816a981376d"><td id="S=eP" class=""><strong>Mixpanel / PostHog</strong></td><td id="wKKs" class="">User &amp; funnel analytics</td><td id="CoE=" class="">All</td><td id="HtSO" class="">Track auth events, role usage, retention</td></tr><tr id="2933ddca-8541-802e-83dd-da903470ec79"><td id="S=eP" class=""><strong>Sentry</strong></td><td id="wKKs" class="">Error logging &amp; monitoring</td><td id="CoE=" class="">All</td><td id="HtSO" class="">Capture frontend &amp; server errors with context</td></tr><tr id="2933ddca-8541-80db-a7c5-c3ea16194aec"><td id="S=eP" class=""><strong>Shadowfax API</strong> (optional pilot)</td><td id="wKKs" class="">3PL delivery for overflow zones</td><td id="CoE=" class="">Phase 3</td><td id="HtSO" class="">Book rider pickup, track delivery</td></tr><tr id="2933ddca-8541-8065-bd51-c7bb2e437d39"><td id="S=eP" class=""><strong>WhatsApp Cloud API</strong> (future)</td><td id="wKKs" class="">Notifications &amp; support</td><td id="CoE=" class="">Phase 4</td><td id="HtSO" class="">Meal reminders, support chatbot</td></tr></tbody></table><p id="2933ddca-8541-809f-a31a-da90f4215935" class="">Integration principles: isolate each adapter behind a service module, retry idempotently, and log provider refs in dedicated tables (<code>payments</code>, <code>delivery_events</code>, etc).</p><hr id="2933ddca-8541-806f-8939-f02ede6d75dc"/><h2 id="2933ddca-8541-8057-9571-fb41c449b087" class="">C) Delivery &amp; Logistics Design (Phase 2–3)</h2><h3 id="2933ddca-8541-8096-a0f9-ff1f5218e40e" class="">C1) Hybrid Delivery Model</h3><p id="2933ddca-8541-80cf-8962-e1d87108698e" class="">Two transport layers operate together:</p><table id="2933ddca-8541-8022-9b24-d892d71a2835" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-800c-a22e-dcaadd9875b7"><th id="l^eG" class="simple-table-header-color simple-table-header">Mode</th><th id="vlBe" class="simple-table-header-color simple-table-header">Actor</th><th id="CvUB" class="simple-table-header-color simple-table-header">Capacity</th><th id="F|J&gt;" class="simple-table-header-color simple-table-header">Use Case</th></tr></thead><tbody><tr id="2933ddca-8541-8067-aba5-dfe564f06725"><td id="l^eG" class=""><strong>Riders (on bike/EV)</strong></td><td id="vlBe" class="">Gig riders</td><td id="CvUB" class="">15–20 meals per route</td><td id="F|J&gt;" class="">Dense PG/office clusters</td></tr><tr id="2933ddca-8541-8083-bf2c-ceddf40a9b7a"><td id="l^eG" class=""><strong>Pickup EV Trucks</strong></td><td id="vlBe" class="">Partner drivers (Shadowfax or in-house)</td><td id="CvUB" class="">150–200 meals</td><td id="F|J&gt;" class="">Bulk PG/hostel deliveries per area</td></tr></tbody></table><h3 id="2933ddca-8541-80bc-b43f-eb13717fb24b" class="">C2) Routing Logic</h3><ol type="1" id="2933ddca-8541-8095-ba42-cec763b2bac3" class="numbered-list" start="1"><li>System groups daily orders by <strong>zone + slot</strong>.</li></ol><ol type="1" id="2933ddca-8541-801c-aaa4-eff9fdfe1528" class="numbered-list" start="2"><li>Generate <strong>routes</strong> with 15–20 stops each (configurable).</li></ol><ol type="1" id="2933ddca-8541-80b7-bed1-d78e2e55cfdf" class="numbered-list" start="3"><li>Assign available riders based on capacity &amp; zone.</li></ol><ol type="1" id="2933ddca-8541-8078-b956-d06f3a863160" class="numbered-list" start="4"><li>Rider accepts route → <code>/rider/routes/:id</code> displays sequential stops.</li></ol><ol type="1" id="2933ddca-8541-80f5-85ec-ebeca3d73760" class="numbered-list" start="5"><li>Each stop requires OTP confirmation; exceptions logged.</li></ol><h3 id="2933ddca-8541-8097-8268-e8df37a86d87" class="">C3) Delivery Statuses (+ expected transitions)</h3><p id="2933ddca-8541-8016-b114-f28278a4d7dc" class=""><code>scheduled → preparing → ready → picked → delivered | failed:{NNA,address,quality,other}</code></p><ul id="2933ddca-8541-808f-9c47-c88c990c07df" class="bulleted-list"><li style="list-style-type:disc"><strong>Vendors</strong> mark “ready” per meal.</li></ul><ul id="2933ddca-8541-8051-8f4a-d5f652b3cc6b" class="bulleted-list"><li style="list-style-type:disc"><strong>Riders</strong> confirm pickup/delivery.</li></ul><ul id="2933ddca-8541-8078-8f16-c071fd6a3373" class="bulleted-list"><li style="list-style-type:disc"><strong>System</strong> auto-closes stale orders after cut-off.</li></ul><ul id="2933ddca-8541-80d6-b5e7-ef1dc16719f9" class="bulleted-list"><li style="list-style-type:disc"><strong>Admin</strong> sees live map of orders by status.</li></ul><h3 id="2933ddca-8541-80f0-92a8-e78998001004" class="">C4) Exception Handling</h3><ul id="2933ddca-8541-802b-a8a0-f5547a77a9bd" class="bulleted-list"><li style="list-style-type:disc">Rider marks exception → prompt reason → optional photo.</li></ul><ul id="2933ddca-8541-8013-b4d0-d8609cd67181" class="bulleted-list"><li style="list-style-type:disc">Admin dashboard “Exceptions Queue” displays unresolved cases.</li></ul><ul id="2933ddca-8541-80af-b8d7-c105cd8518e7" class="bulleted-list"><li style="list-style-type:disc">Ticket auto-created → linked to <code>tickets</code> table for resolution.</li></ul><hr id="2933ddca-8541-8029-98e3-ec04ff854a24"/><h2 id="2933ddca-8541-8012-b93b-ffb4c012846d" class="">D) Payment &amp; Payout Flows (Phase 2–3)</h2><h3 id="2933ddca-8541-8099-ac5a-cd0df0b23ea0" class="">D1) Consumer Payments</h3><ol type="1" id="2933ddca-8541-8024-a4ef-f61b41bebd78" class="numbered-list" start="1"><li>User selects plan → Razorpay checkout → payment success webhook.</li></ol><ol type="1" id="2933ddca-8541-80f9-8f92-d0a46925195a" class="numbered-list" start="2"><li>Create <code>payments</code> record (status=<code>success</code> or <code>failed</code>).</li></ol><ol type="1" id="2933ddca-8541-804d-b8a4-ecb2282ab3f6" class="numbered-list" start="3"><li>Activate subscription (<code>status=active</code>).</li></ol><ol type="1" id="2933ddca-8541-80ed-9be7-de5930426d94" class="numbered-list" start="4"><li>Auto-renew (if billing_type=<code>auto</code>) → repeat Razorpay charge.</li></ol><p id="2933ddca-8541-8016-9f39-d54462afdab7" class=""><strong>Edge cases:</strong> payment timeout, duplicate webhook, refund trigger on subscription cancel.</p><h3 id="2933ddca-8541-805a-b75d-d60df58984f0" class="">D2) Vendor Payouts</h3><ul id="2933ddca-8541-8053-b74b-d014f2ca64f2" class="bulleted-list"><li style="list-style-type:disc">Weekly cron aggregates <strong>delivered orders × per-meal rate – platform commission</strong>.</li></ul><ul id="2933ddca-8541-80d8-8993-ccd27561169a" class="bulleted-list"><li style="list-style-type:disc">Insert into <code>payouts_vendor</code>.</li></ul><ul id="2933ddca-8541-8087-8edd-f2c19b215c67" class="bulleted-list"><li style="list-style-type:disc">Admin approves → status=<code>released</code> → transfer via Razorpay X or bank upload.</li></ul><h3 id="2933ddca-8541-80af-ae84-ed5802b13895" class="">D3) Rider Payouts</h3><ul id="2933ddca-8541-8077-8a94-fefffda0a89b" class="bulleted-list"><li style="list-style-type:disc">Per-delivery fee + zone bonus.</li></ul><ul id="2933ddca-8541-8041-8dc1-c7e2f7835c12" class="bulleted-list"><li style="list-style-type:disc">Aggregate weekly → <code>payouts_rider</code>.</li></ul><ul id="2933ddca-8541-80a4-94dc-fb016ce0e2c8" class="bulleted-list"><li style="list-style-type:disc">Generate summary statement PDF for Admin.</li></ul><h3 id="2933ddca-8541-808a-aea8-d213c73c1ad2" class="">D4) Accounting / Reconciliation</h3><ul id="2933ddca-8541-80e3-a1be-f87479041395" class="bulleted-list"><li style="list-style-type:disc">Every <code>payments</code> entry is matched with one or many orders.</li></ul><ul id="2933ddca-8541-8046-9d05-c7269e315853" class="bulleted-list"><li style="list-style-type:disc">Every payout has reference to the aggregated orders.</li></ul><ul id="2933ddca-8541-802a-86ad-e0db083fcada" class="bulleted-list"><li style="list-style-type:disc">Maintain <code>transaction_id</code> mapping for audits.</li></ul><ul id="2933ddca-8541-8042-ba84-fb9fc77ca513" class="bulleted-list"><li style="list-style-type:disc">Admin can export CSV of period balances.</li></ul><hr id="2933ddca-8541-805b-a3dc-f3713ab75b95"/><h2 id="2933ddca-8541-8010-a0bb-c7eb56c868d8" class="">E) Support &amp; Quality Operations (Phase 3+)</h2><table id="2933ddca-8541-8018-88e6-f282a3c4d31c" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-80d4-8108-e5c27eb4a995"><th id="dmLB" class="simple-table-header-color simple-table-header">Function</th><th id="]EV\" class="simple-table-header-color simple-table-header">Description</th><th id="}Bu`" class="simple-table-header-color simple-table-header">Data Object</th></tr></thead><tbody><tr id="2933ddca-8541-80a8-86d9-d33464c45dc3"><td id="dmLB" class=""><strong>Ratings &amp; Reviews</strong></td><td id="]EV\" class="">Consumer feedback per vendor or order</td><td id="}Bu`" class=""><code>ratings</code></td></tr><tr id="2933ddca-8541-806a-9095-ecdeb7d10fdd"><td id="dmLB" class=""><strong>Tickets</strong></td><td id="]EV\" class="">Issues (quality, delay, refund)</td><td id="}Bu`" class=""><code>tickets</code></td></tr><tr id="2933ddca-8541-80f3-8f9f-cc29ea4e1281"><td id="dmLB" class=""><strong>Auto-Credits</strong></td><td id="]EV\" class="">Auto-grant credit for verified complaint</td><td id="}Bu`" class=""><code>wallet_ledger</code> (future)</td></tr><tr id="2933ddca-8541-8032-94db-dc7464ab05b6"><td id="dmLB" class=""><strong>Hygiene Checks</strong></td><td id="]EV\" class="">Vendors upload weekly kitchen photo; Admin marks verified</td><td id="}Bu`" class=""><code>vendor_docs</code> (+ audit)</td></tr></tbody></table><p id="2933ddca-8541-80cd-860e-c8e0b79bcfe6" class="">SLAs target: &gt; 95 % tickets closed &lt; 24 h.</p><hr id="2933ddca-8541-80ba-b27c-ed78b4c8c31a"/><h2 id="2933ddca-8541-80d8-848e-de346f85e279" class="">F) Analytics &amp; Monitoring (Always On)</h2><h3 id="2933ddca-8541-808b-b973-ee5a2ee4619f" class="">F1) Metrics Pyramid</h3><table id="2933ddca-8541-807a-9854-d16ff0e61613" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-80a8-90d8-cb8986b56ce7"><th id="ETt`" class="simple-table-header-color simple-table-header">Layer</th><th id="AyVd" class="simple-table-header-color simple-table-header">Goal</th><th id="yD`:" class="simple-table-header-color simple-table-header">Sample Metrics</th></tr></thead><tbody><tr id="2933ddca-8541-806e-b93f-e2f9714ce183"><td id="ETt`" class=""><strong>User Acquisition</strong></td><td id="AyVd" class="">Understand growth &amp; funnels</td><td id="yD`:" class="">Sign-ups per role, OTP fail %, role conversion %</td></tr><tr id="2933ddca-8541-8045-a448-d78d983caad8"><td id="ETt`" class=""><strong>Engagement</strong></td><td id="AyVd" class="">Retention &amp; usage</td><td id="yD`:" class="">Weekly Active Consumers/Vendors, login frequency</td></tr><tr id="2933ddca-8541-8019-abdf-e034cbb338ca"><td id="ETt`" class=""><strong>Operational Health</strong></td><td id="AyVd" class="">Delivery efficiency</td><td id="yD`:" class="">On-time %, Avg route duration, Exception rate</td></tr><tr id="2933ddca-8541-80cb-b6b0-df78a8df264c"><td id="ETt`" class=""><strong>Revenue</strong></td><td id="AyVd" class="">Financial performance</td><td id="yD`:" class="">GMV, commission %, avg subscription value</td></tr><tr id="2933ddca-8541-8081-a81e-d038a8131232"><td id="ETt`" class=""><strong>Quality</strong></td><td id="AyVd" class="">Experience</td><td id="yD`:" class="">Avg rating, complaint rate, refund rate</td></tr></tbody></table><h3 id="2933ddca-8541-807a-865e-f22ea57f13cb" class="">F2) Data Pipelines</h3><ul id="2933ddca-8541-803c-8a8f-d6662da00ad7" class="bulleted-list"><li style="list-style-type:disc">Capture events via Mixpanel/PostHog SDK on frontend.</li></ul><ul id="2933ddca-8541-80ef-a049-c76561bd2b1c" class="bulleted-list"><li style="list-style-type:disc">Mirror aggregates in Supabase materialized views for Admin charts.</li></ul><ul id="2933ddca-8541-80db-87dd-ec9e5e44d038" class="bulleted-list"><li style="list-style-type:disc">Future: ETL to BigQuery/Looker for deep BI.</li></ul><h3 id="2933ddca-8541-8015-9bfe-dd72c9b8844f" class="">F3) Error Monitoring &amp; Logs</h3><ul id="2933ddca-8541-80cf-aaff-c97d01e7248e" class="bulleted-list"><li style="list-style-type:disc">Sentry for frontend + server actions.</li></ul><ul id="2933ddca-8541-8072-8ad9-c4c943ac2d22" class="bulleted-list"><li style="list-style-type:disc">Supabase audit_log table for privileged changes.</li></ul><ul id="2933ddca-8541-80a5-a261-d61c5c441e02" class="bulleted-list"><li style="list-style-type:disc">Slack/email alerts for critical errors (auth failures, payout failures).</li></ul><hr id="2933ddca-8541-80f5-89d1-cd240107b83c"/><h2 id="2933ddca-8541-80bc-86d5-ea0e5d4cae1e" class="">G) Operational Roles &amp; Responsibilities</h2><table id="2933ddca-8541-80c0-b332-d0d150b1a5cf" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-804e-b034-d09b045a6b13"><th id="sO`Q" class="simple-table-header-color simple-table-header">Role</th><th id="GZMB" class="simple-table-header-color simple-table-header">Day-to-Day Actions</th></tr></thead><tbody><tr id="2933ddca-8541-801c-98a6-f7e3ffa06e58"><td id="sO`Q" class=""><strong>Consumer</strong></td><td id="GZMB" class="">Manage subscription, skip meals, report issues, rate meals</td></tr><tr id="2933ddca-8541-807a-8576-d91fd7af669c"><td id="sO`Q" class=""><strong>Vendor</strong></td><td id="GZMB" class="">Plan menu, mark orders ready, monitor ratings, receive payouts</td></tr><tr id="2933ddca-8541-800e-9bcc-d28247896b8c"><td id="sO`Q" class=""><strong>Rider</strong></td><td id="GZMB" class="">Deliver orders, report exceptions, confirm via OTP</td></tr><tr id="2933ddca-8541-80aa-9dd9-eca87692381b"><td id="sO`Q" class=""><strong>Admin – Ops</strong></td><td id="GZMB" class="">Approve vendors/riders, monitor routes, resolve tickets</td></tr><tr id="2933ddca-8541-80be-bd96-f1f14b33b620"><td id="sO`Q" class=""><strong>Admin – Finance</strong></td><td id="GZMB" class="">Run payouts, review reconciliation, manage commissions</td></tr><tr id="2933ddca-8541-80dc-9599-d06b3f4e22b2"><td id="sO`Q" class=""><strong>Admin – Tech</strong></td><td id="GZMB" class="">Manage zones, RLS, backups, error alerts</td></tr></tbody></table><hr id="2933ddca-8541-80d4-bc1e-dd272e16727c"/><h2 id="2933ddca-8541-80e9-a4c0-df8a5dbea8fc" class="">H) Scalability &amp; Performance Foundations</h2><ol type="1" id="2933ddca-8541-8086-807b-d7770f5ffdbb" class="numbered-list" start="1"><li><strong>Supabase policies</strong> are multi-tenant; zones partition data logically.</li></ol><ol type="1" id="2933ddca-8541-809f-83b9-ecacd0c36365" class="numbered-list" start="2"><li><strong>Postgres indexes</strong> on hot fields (status, zone_id, date) keep queries &lt; 100 ms.</li></ol><ol type="1" id="2933ddca-8541-80b8-829a-f7274c20798e" class="numbered-list" start="3"><li><strong>Storage CDN</strong> enabled for images / videos.</li></ol><ol type="1" id="2933ddca-8541-800e-9c0f-d40436ce8242" class="numbered-list" start="4"><li><strong>Server actions</strong> wrapped with timeouts and retries for idempotency.</li></ol><ol type="1" id="2933ddca-8541-801d-8cde-fe01c344c8ef" class="numbered-list" start="5"><li><strong>Edge functions</strong> for heavy jobs (nightly order generation, weekly payouts).</li></ol><ol type="1" id="2933ddca-8541-804b-b44a-c259355c418b" class="numbered-list" start="6"><li><strong>Horizontal scaling</strong> ready via Supabase project replicas when Delhi NCR → multi-city.</li></ol><hr id="2933ddca-8541-8012-915b-db562f4467da"/><h2 id="2933ddca-8541-8057-b65a-fdb996171b4b" class="">I) Security &amp; Compliance</h2><ul id="2933ddca-8541-803a-96b3-e7490d092226" class="bulleted-list"><li style="list-style-type:disc"><strong>PII</strong> (phone, address) never sent to public queries.</li></ul><ul id="2933ddca-8541-80ae-9c58-d32736ff4159" class="bulleted-list"><li style="list-style-type:disc"><strong>Docs (IDs/FSSAI)</strong> in private buckets with signed URLs (expiry 60 s).</li></ul><ul id="2933ddca-8541-8085-87a5-ebd239059864" class="bulleted-list"><li style="list-style-type:disc"><strong>Audit every role change</strong> (admin adds/removes role → record actor + timestamp).</li></ul><ul id="2933ddca-8541-80e6-9205-c8e710a7b3ed" class="bulleted-list"><li style="list-style-type:disc"><strong>Backups</strong> daily; retention 30 days.</li></ul><ul id="2933ddca-8541-8054-a520-c087bf0f6f52" class="bulleted-list"><li style="list-style-type:disc"><strong>Data retention:</strong> orders &amp; payments 7 years (financial compliance); media/docs 1 year post deactivation.</li></ul><ul id="2933ddca-8541-8023-91d9-f23c04a7c1ff" class="bulleted-list"><li style="list-style-type:disc"><strong>GDPR-style consent</strong> popup for tracking cookies (optional).</li></ul><ul id="2933ddca-8541-8098-8f61-d2ab228aa187" class="bulleted-list"><li style="list-style-type:disc"><strong>Vulnerability testing:</strong> annual pentest post Series A stage.</li></ul><hr id="2933ddca-8541-80f4-b5d6-fbdf255998c8"/><h2 id="2933ddca-8541-8058-ac88-e34d0c744fd8" class="">J) Deployment &amp; Ops Pipeline</h2><table id="2933ddca-8541-80ec-a7d0-dd6c6495e2df" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-8026-b8fe-ea368c923e4f"><th id="~g?Y" class="simple-table-header-color simple-table-header">Environment</th><th id="ydE_" class="simple-table-header-color simple-table-header">Purpose</th><th id="zlAn" class="simple-table-header-color simple-table-header">Infra</th></tr></thead><tbody><tr id="2933ddca-8541-8099-ab9f-d1dd183a8316"><td id="~g?Y" class=""><strong>Dev</strong></td><td id="ydE_" class="">Cursor AI sandbox / Supabase project (dev)</td><td id="zlAn" class="">CI preview builds</td></tr><tr id="2933ddca-8541-80e7-b3c1-d176e39d812e"><td id="~g?Y" class=""><strong>Staging</strong></td><td id="ydE_" class="">Internal QA w/ seed data</td><td id="zlAn" class="">Vercel + Supabase staging DB</td></tr><tr id="2933ddca-8541-803a-8d1a-ec3c42a8510a"><td id="~g?Y" class=""><strong>Production</strong></td><td id="ydE_" class="">Live Delhi NCR deployment</td><td id="zlAn" class="">Vercel + Supabase prod instance</td></tr><tr id="2933ddca-8541-8098-a53e-e0aab25e7b2e"><td id="~g?Y" class=""><strong>Monitoring</strong></td><td id="ydE_" class="">Sentry + Mixpanel</td><td id="zlAn" class="">All environments</td></tr></tbody></table><p id="2933ddca-8541-8023-9bc2-e2ac4110e40b" class="">Deployment flow: main → staging review → manual approve → prod release (+ seed zone + admin).</p><hr id="2933ddca-8541-80fa-a696-ee7dd50b7a0d"/><h2 id="2933ddca-8541-80d0-b0ef-e18168d214ae" class="">K) Expansion Roadmap (Strategic)</h2><table id="2933ddca-8541-8065-b3bc-fb7ceb9ebe17" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-80fa-bad3-f1d55eb644f8"><th id="HUIF" class="simple-table-header-color simple-table-header">Phase</th><th id="QUHH" class="simple-table-header-color simple-table-header">Focus</th><th id="Vwcj" class="simple-table-header-color simple-table-header">Outcomes</th></tr></thead><tbody><tr id="2933ddca-8541-80ab-9d3f-f77176022c2a"><td id="HUIF" class=""><strong>0 – Foundation</strong></td><td id="QUHH" class="">Multi-role auth, dashboards</td><td id="Vwcj" class="">Stable roles &amp; RLS</td></tr><tr id="2933ddca-8541-8058-bd44-ebe45951993f"><td id="HUIF" class=""><strong>1 – Vendor Onboarding</strong></td><td id="QUHH" class="">KYC + discovery</td><td id="Vwcj" class="">Active vendors in Delhi NCR</td></tr><tr id="2933ddca-8541-8034-aa33-c15830076c3a"><td id="HUIF" class=""><strong>2 – Subscriptions &amp; Payments</strong></td><td id="QUHH" class="">Consumer plans + Razorpay</td><td id="Vwcj" class="">First 1 000 paying subs</td></tr><tr id="2933ddca-8541-8093-9f39-eb6875152aa3"><td id="HUIF" class=""><strong>3 – Delivery Ops</strong></td><td id="QUHH" class="">Rider routing + OTP</td><td id="Vwcj" class="">80 % on-time deliveries</td></tr><tr id="2933ddca-8541-8026-b1bd-f7fc3cb7b04e"><td id="HUIF" class=""><strong>4 – Payouts &amp; Analytics</strong></td><td id="QUHH" class="">Financial reconciliation + dashboards</td><td id="Vwcj" class="">Automated settlements</td></tr><tr id="2933ddca-8541-807a-a735-d61b637718e8"><td id="HUIF" class=""><strong>5 – Scale to Cities</strong></td><td id="QUHH" class="">Noida, Gurgaon, Bangalore</td><td id="Vwcj" class="">10 000+ monthly orders</td></tr><tr id="2933ddca-8541-802d-9ece-fdad05c44168"><td id="HUIF" class=""><strong>6 – Corporate Meals / B2B</strong></td><td id="QUHH" class="">Bulk plans for offices</td><td id="Vwcj" class="">B2B revenue stream</td></tr><tr id="2933ddca-8541-80d6-800b-c077151cebf1"><td id="HUIF" class=""><strong>7 – Mobile Apps</strong></td><td id="QUHH" class="">React Native for Consumer, Vendor, Rider</td><td id="Vwcj" class="">High engagement &amp; retention</td></tr><tr id="2933ddca-8541-8003-8e7d-c1fbbc21c8de"><td id="HUIF" class=""><strong>8 – Intelligence Layer</strong></td><td id="QUHH" class="">ML meal recommendations, dynamic pricing</td><td id="Vwcj" class="">Personalization &amp; margin optimization</td></tr></tbody></table><hr id="2933ddca-8541-8019-a589-c9baf57dc9a7"/><h2 id="2933ddca-8541-80c3-83b4-f28626d3cc5a" class="">L) KPIs for Post-Launch Monitoring</h2><table id="2933ddca-8541-80ff-b1dc-dfd6392001c7" class="simple-table"><thead class="simple-table-header"><tr id="2933ddca-8541-80f0-8821-fad398721f5c"><th id="B[KK" class="simple-table-header-color simple-table-header">Domain</th><th id="[OTt" class="simple-table-header-color simple-table-header">Primary Metric</th><th id="OLxu" class="simple-table-header-color simple-table-header">Target after 6 mo</th></tr></thead><tbody><tr id="2933ddca-8541-8031-969f-c89d3c4b2baa"><td id="B[KK" class="">Growth</td><td id="[OTt" class="">Active users (Consumers + Vendors + Riders)</td><td id="OLxu" class="">&gt; 2 000</td></tr><tr id="2933ddca-8541-803a-801d-fde762619f43"><td id="B[KK" class="">Ops</td><td id="[OTt" class="">On-time delivery rate</td><td id="OLxu" class="">≥ 95 %</td></tr><tr id="2933ddca-8541-8041-8829-f7900ab8a00e"><td id="B[KK" class="">Quality</td><td id="[OTt" class="">Avg meal rating</td><td id="OLxu" class="">≥ 4.3 / 5</td></tr><tr id="2933ddca-8541-8096-904d-e66cbfc7da68"><td id="B[KK" class="">Support</td><td id="[OTt" class="">Tickets resolved &lt; 24 h</td><td id="OLxu" class="">&gt; 90 %</td></tr><tr id="2933ddca-8541-8043-a206-ee7ed872d534"><td id="B[KK" class="">Finance</td><td id="[OTt" class="">Gross Margin per order</td><td id="OLxu" class="">≥ 20 %</td></tr><tr id="2933ddca-8541-80eb-8bdc-ccc5e9f5a61e"><td id="B[KK" class="">Tech</td><td id="[OTt" class="">Uptime &amp; API latency</td><td id="OLxu" class="">99.9 % / &lt; 300 ms</td></tr></tbody></table></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>